module.exports=[762587,a=>{"use strict";let b;var c=a.i(857446);a.i(580551);var d=a.i(285993),e=a.i(624282),f=a.i(721578),g=a.i(735835),h=a.i(574596),i=a.i(207973),j=a.i(622427);let k=(0,j.default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var l=a.i(322178),m=a.i(139274);let n=(0,j.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=a.i(630135),p=a.i(67659),q=a.i(253220),r=a.i(95811),s=a.i(135321),t=a.i(397494),u=a.i(676653);let v=q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("div",{ref:d,className:(0,u.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));v.displayName="Card",q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("div",{ref:d,className:(0,u.cn)("flex flex-col space-y-1.5 p-6",a),...b})).displayName="CardHeader",q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("div",{ref:d,className:(0,u.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b})).displayName="CardTitle",q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("div",{ref:d,className:(0,u.cn)("text-sm text-muted-foreground",a),...b})).displayName="CardDescription";let w=q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("div",{ref:d,className:(0,u.cn)("p-6 pt-0",a),...b}));w.displayName="CardContent",q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("div",{ref:d,className:(0,u.cn)("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter";var x=a.i(315330);let y=q.forwardRef(({className:a,href:b,children:d,...e},f)=>{let g=b.startsWith("http")?b:`https://useworkflow.dev/docs/${b.replace(/^\//,"")}`;return(0,c.jsx)(x.default,{href:g,className:(0,u.cn)("font-medium underline underline-offset-4 transition-colors",a),style:{color:"var(--ds-blue-600)"},target:"_blank",rel:"noopener noreferrer",ref:f,...e,children:d})});y.displayName="DocsLink";var z=a.i(794851);let A=q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("div",{className:"relative w-full overflow-auto",children:(0,c.jsx)("table",{ref:d,className:(0,u.cn)("w-full caption-bottom text-sm",a),...b})}));A.displayName="Table";let B=q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("thead",{ref:d,className:(0,u.cn)("[&_tr]:border-b",a),...b}));B.displayName="TableHeader";let C=q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("tbody",{ref:d,className:(0,u.cn)("[&_tr:last-child]:border-0",a),...b}));C.displayName="TableBody",q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("tfoot",{ref:d,className:(0,u.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...b})).displayName="TableFooter";let D=q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("tr",{ref:d,className:(0,u.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...b}));D.displayName="TableRow";let E=q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("th",{ref:d,className:(0,u.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...b}));E.displayName="TableHead";let F=q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("td",{ref:d,className:(0,u.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...b}));F.displayName="TableCell",q.forwardRef(({className:a,...b},d)=>(0,c.jsx)("caption",{ref:d,className:(0,u.cn)("mt-4 text-sm text-muted-foreground",a),...b})).displayName="TableCaption";var G=a.i(393557),H=a.i(432320),I=a.i(315244),J=a.i(433105);function K({rows:a=u.DEFAULT_PAGE_SIZE,variant:b="runs"}){return(0,c.jsx)(v,{className:"overflow-hidden mt-4 bg-background",children:(0,c.jsxs)(w,{className:"p-0",children:[(()=>{switch(b){case"runs":return(0,c.jsxs)("div",{className:"grid grid-cols-[1fr_1.5fr_0.8fr_1fr_1fr_40px] items-center gap-4 py-3 px-4 border-b",children:[(0,c.jsx)(J.Skeleton,{className:"h-4 w-20"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-14"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-12"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-14"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-20"}),(0,c.jsx)("div",{className:"w-6"})]});case"hooks":return(0,c.jsxs)("div",{className:"grid grid-cols-[1.2fr_1.2fr_0.8fr_1fr_0.5fr_40px] items-center gap-4 py-3 px-4 border-b",children:[(0,c.jsx)(J.Skeleton,{className:"h-4 w-16"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-14"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-12"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-14"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-20"}),(0,c.jsx)("div",{className:"w-6"})]});case"workflows":return(0,c.jsxs)("div",{className:"grid grid-cols-[1fr_1.5fr_0.5fr] items-center gap-4 py-3 px-4 border-b",children:[(0,c.jsx)(J.Skeleton,{className:"h-4 w-20"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-10"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-12 mx-auto"})]});default:return null}})(),Array.from({length:a},(a,d)=>(a=>{switch(b){case"runs":return(0,c.jsxs)("div",{className:"grid grid-cols-[1fr_1.5fr_0.8fr_1fr_1fr_40px] items-center gap-4 py-3 px-4",children:[(0,c.jsx)(J.Skeleton,{className:"h-4 w-3/4"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-4/5"}),(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsx)(J.Skeleton,{className:"h-3 w-14"}),(0,c.jsx)(J.Skeleton,{className:"h-2 w-8"})]}),(0,c.jsx)(J.Skeleton,{className:"h-3 w-3/4"}),(0,c.jsx)(J.Skeleton,{className:"h-3 w-3/4"}),(0,c.jsx)(J.Skeleton,{className:"h-6 w-6 rounded"})]},`skeleton-row-${a}`);case"hooks":return(0,c.jsxs)("div",{className:"grid grid-cols-[1.2fr_1.2fr_0.8fr_1fr_0.5fr_40px] items-center gap-4 py-3 px-4",children:[(0,c.jsx)(J.Skeleton,{className:"h-4 w-4/5"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-4/5"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-3/4"}),(0,c.jsx)(J.Skeleton,{className:"h-3 w-3/4"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-8"}),(0,c.jsx)(J.Skeleton,{className:"h-6 w-6 rounded"})]},`skeleton-row-${a}`);case"workflows":return(0,c.jsxs)("div",{className:"grid grid-cols-[1fr_1.5fr_0.5fr] items-center gap-4 py-3 px-4",children:[(0,c.jsx)(J.Skeleton,{className:"h-4 w-3/4"}),(0,c.jsx)(J.Skeleton,{className:"h-4 w-4/5"}),(0,c.jsx)(J.Skeleton,{className:"h-5 w-16 rounded-full mx-auto"})]},`skeleton-row-${a}`);default:return null}})(d))]})})}function L({runId:a,onHookClick:b,selectedHookId:d}){let[e,j]=(0,q.useState)(()=>new Date),u=(0,q.useMemo)(()=>({}),[]),{data:x,error:J,nextPage:L,previousPage:M,hasNextPage:N,hasPreviousPage:O,reload:P,pageInfo:Q}=(0,f.useWorkflowHooks)(u,{runId:a,sortOrder:"desc"}),R=(0,g.useHookActions)({env:u,callbacks:{onSuccess:P}}),S=x.isLoading,T=x.data??[],[U,V]=(0,q.useState)(new Map);return(0,q.useEffect)(()=>{T.length&&(async()=>{let a=new Map;for(let b of T)a.set(b.hookId,{count:0,hasMore:!1,loading:!0});V(a);let b=await Promise.allSettled(T.map(async a=>{try{let b=await (0,h.fetchEventsByCorrelationId)(u,a.hookId,{sortOrder:"asc",limit:100});if(!b.success)return{hookId:a.hookId,count:Error(b.error?.message||"Failed to fetch events"),hasMore:!1};let c=b.data,d=c.data.filter(a=>"hook_received"===a.eventType).length;return{hookId:a.hookId,count:d,hasMore:c.hasMore}}catch(b){return{hookId:a.hookId,count:b,hasMore:!1}}}));V(a=>{let c=new Map(a);for(let a=0;a<b.length;a++){let d=b[a],e=T[a].hookId;"fulfilled"===d.status?c.set(d.value.hookId,{count:d.value.count,hasMore:d.value.hasMore,loading:!1}):c.set(e,{count:0,hasMore:!1,loading:!1})}return c})})()},[T,u]),(0,c.jsxs)("div",{children:[(0,c.jsx)(g.HookResolveModalWrapper,{hookActions:R}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-end gap-2",children:[(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last refreshed"}),e&&(0,c.jsx)(I.RelativeTime,{date:e,className:"text-sm text-muted-foreground",type:"distance"})]}),(0,c.jsx)("div",{className:"flex items-center gap-4",children:(0,c.jsxs)(G.Tooltip,{children:[(0,c.jsx)(G.TooltipTrigger,{asChild:!0,children:(0,c.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>{j(()=>new Date),P()},disabled:S,children:[(0,c.jsx)(n,{className:S?"animate-spin":""}),"Refresh"]})}),(0,c.jsx)(G.TooltipContent,{children:"Note that this resets pages"})]})})]}),J?(0,c.jsxs)(s.Alert,{variant:"destructive",children:[(0,c.jsx)(i.AlertCircle,{className:"h-4 w-4"}),(0,c.jsx)(s.AlertTitle,{children:"Error loading hooks"}),(0,c.jsx)(s.AlertDescription,{children:(0,f.getErrorMessage)(J)})]}):S||T&&0!==T.length?S&&!x?.data?(0,c.jsx)(K,{variant:"hooks"}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(v,{className:"overflow-hidden mt-4 bg-background",children:(0,c.jsx)(w,{className:"p-0 max-h-[calc(100vh-280px)] overflow-auto",children:(0,c.jsxs)(A,{children:[(0,c.jsx)(B,{children:(0,c.jsxs)(D,{children:[(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Hook ID"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Run ID"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Token"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Created"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Invocations"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10 w-10"})]})}),(0,c.jsx)(C,{children:T.map(a=>(0,c.jsxs)(D,{className:"cursor-pointer group relative",onClick:()=>b(a.hookId,a.runId),"data-selected":a.hookId===d,children:[(0,c.jsx)(F,{className:"font-mono text-xs py-2",children:(0,c.jsx)(H.CopyableText,{text:a.hookId,overlay:!0,children:a.hookId})}),(0,c.jsx)(F,{className:"font-mono text-xs py-2",children:(0,c.jsx)(H.CopyableText,{text:a.runId,overlay:!0,children:a.runId})}),(0,c.jsx)(F,{className:"font-mono text-xs py-2",children:(0,c.jsx)(H.CopyableText,{text:a.token,overlay:!0,children:(0,c.jsx)("span",{className:"text-muted-foreground",children:"••••••••••••"})})}),(0,c.jsx)(F,{className:"py-2 text-muted-foreground text-xs",children:a.createdAt?(0,c.jsx)(I.RelativeTime,{date:a.createdAt}):"-"}),(0,c.jsx)(F,{className:"py-2",children:(a=>{let b=U.get(a.hookId);if(!b||b.loading)return(0,c.jsx)("span",{className:"text-muted-foreground text-xs",children:"..."});if(b.count instanceof Error)return(0,c.jsx)("span",{className:"text-muted-foreground",children:"Error"});if(0===b.count)return(0,c.jsx)("span",{className:"text-muted-foreground",children:"0"});let d=b.hasMore?`${b.count}+`:`${b.count}`;return b.hasMore?(0,c.jsxs)(G.Tooltip,{children:[(0,c.jsx)(G.TooltipTrigger,{asChild:!0,children:(0,c.jsx)("span",{className:"font-semibold cursor-help",children:d})}),(0,c.jsx)(G.TooltipContent,{className:"max-w-xs",children:(0,c.jsx)("div",{className:"text-xs",children:"Showing first 100 invocations. There may be more."})})]}):(0,c.jsx)("span",{className:"font-semibold",children:d})})(a)}),(0,c.jsx)(F,{className:"py-2",children:(0,c.jsxs)(z.DropdownMenu,{children:[(0,c.jsx)(z.DropdownMenuTrigger,{asChild:!0,children:(0,c.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:a=>a.stopPropagation(),children:(0,c.jsx)(m.MoreHorizontal,{className:"h-4 w-4"})})}),(0,c.jsxs)(z.DropdownMenuContent,{align:"end",children:[(0,c.jsx)(g.ResolveHookDropdownItem,{hook:a,stopPropagation:!0,onResolveClick:R.openResolveModal,DropdownMenuItem:z.DropdownMenuItem}),(0,c.jsxs)(z.DropdownMenuItem,{onClick:async b=>{b.stopPropagation();try{let b=await (0,f.recreateRun)(u,a.runId);r.toast.success("New run started",{description:`Run ID: ${b}`}),P()}catch(a){r.toast.error("Failed to re-run",{description:a instanceof Error?a.message:"Unknown error"})}},children:[(0,c.jsx)(o.RotateCw,{className:"h-4 w-4 mr-2"}),"Replay Run"]}),(0,c.jsxs)(z.DropdownMenuItem,{onClick:async b=>{b.stopPropagation();try{await (0,f.cancelRun)(u,a.runId),r.toast.success("Run cancelled"),P()}catch(a){r.toast.error("Failed to cancel",{description:a instanceof Error?a.message:"Unknown error"})}},children:[(0,c.jsx)(p.XCircle,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})})]},a.hookId))})]})})}),(0,c.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,c.jsx)("div",{className:"text-sm text-muted-foreground",children:Q}),(0,c.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,c.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:M,disabled:!O,children:[(0,c.jsx)(k,{}),"Previous"]}),(0,c.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:L,disabled:!N,children:["Next",(0,c.jsx)(l.ChevronRight,{})]})]})]})]}):(0,c.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:["No active hooks found. ",(0,c.jsx)("br",{}),(0,c.jsx)(y,{href:"https://useworkflow.dev/docs/api-reference/workflow/create-hook",children:"Learn how to create a hook"})]})]})}var M=a.i(538015),N=a.i(925060),O=a.i(333598);let P=(0,j.default)("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]),Q=(0,j.default)("ArrowUpAZ",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);var R=a.i(302260),S=a.i(139377),T=a.i(991307);function U(a,[b,c]){return Math.min(c,Math.max(b,a))}var V=a.i(559653),W=a.i(523358),X=a.i(840861),Y=a.i(333702),Z=a.i(539536),$=a.i(443343),_=0;function aa(){q.useEffect(()=>{let a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??ab()),document.body.insertAdjacentElement("beforeend",a[1]??ab()),_++,()=>{1===_&&document.querySelectorAll("[data-radix-focus-guard]").forEach(a=>a.remove()),_--}},[])}function ab(){let a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var ac=a.i(518243),ad=a.i(393352),ae="focusScope.autoFocusOnMount",af="focusScope.autoFocusOnUnmount",ag={bubbles:!1,cancelable:!0},ah=q.forwardRef((a,b)=>{let{loop:d=!1,trapped:e=!1,onMountAutoFocus:f,onUnmountAutoFocus:g,...h}=a,[i,j]=q.useState(null),k=(0,ad.useCallbackRef)(f),l=(0,ad.useCallbackRef)(g),m=q.useRef(null),n=(0,X.useComposedRefs)(b,a=>j(a)),o=q.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;q.useEffect(()=>{if(e){let a=function(a){if(o.paused||!i)return;let b=a.target;i.contains(b)?m.current=b:ak(m.current,{select:!0})},b=function(a){if(o.paused||!i)return;let b=a.relatedTarget;null!==b&&(i.contains(b)||ak(m.current,{select:!0}))};document.addEventListener("focusin",a),document.addEventListener("focusout",b);let c=new MutationObserver(function(a){if(document.activeElement===document.body)for(let b of a)b.removedNodes.length>0&&ak(i)});return i&&c.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",b),c.disconnect()}}},[e,i,o.paused]),q.useEffect(()=>{if(i){al.add(o);let a=document.activeElement;if(!i.contains(a)){let b=new CustomEvent(ae,ag);i.addEventListener(ae,k),i.dispatchEvent(b),b.defaultPrevented||(function(a,{select:b=!1}={}){let c=document.activeElement;for(let d of a)if(ak(d,{select:b}),document.activeElement!==c)return}(ai(i).filter(a=>"A"!==a.tagName),{select:!0}),document.activeElement===a&&ak(i))}return()=>{i.removeEventListener(ae,k),setTimeout(()=>{let b=new CustomEvent(af,ag);i.addEventListener(af,l),i.dispatchEvent(b),b.defaultPrevented||ak(a??document.body,{select:!0}),i.removeEventListener(af,l),al.remove(o)},0)}}},[i,k,l,o]);let p=q.useCallback(a=>{if(!d&&!e||o.paused)return;let b="Tab"===a.key&&!a.altKey&&!a.ctrlKey&&!a.metaKey,c=document.activeElement;if(b&&c){var f;let b,e=a.currentTarget,[g,h]=[aj(b=ai(f=e),f),aj(b.reverse(),f)];g&&h?a.shiftKey||c!==h?a.shiftKey&&c===g&&(a.preventDefault(),d&&ak(h,{select:!0})):(a.preventDefault(),d&&ak(g,{select:!0})):c===e&&a.preventDefault()}},[d,e,o.paused]);return(0,c.jsx)(ac.Primitive.div,{tabIndex:-1,...h,ref:n,onKeyDown:p})});function ai(a){let b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{let b="INPUT"===a.tagName&&"hidden"===a.type;return a.disabled||a.hidden||b?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)b.push(c.currentNode);return b}function aj(a,b){for(let c of a)if(!function(a,{upTo:b}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===b||a!==b);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}(c,{upTo:b}))return c}function ak(a,{select:b=!1}={}){if(a&&a.focus){var c;let d=document.activeElement;a.focus({preventScroll:!0}),a!==d&&(c=a)instanceof HTMLInputElement&&"select"in c&&b&&a.select()}}ah.displayName="FocusScope";var al=(b=[],{add(a){let c=b[0];a!==c&&c?.pause(),(b=am(b,a)).unshift(a)},remove(a){b=am(b,a),b[0]?.resume()}});function am(a,b){let c=[...a],d=c.indexOf(b);return -1!==d&&c.splice(d,1),c}var an=a.i(192534),ao=a.i(248968),ap=a.i(549033),aq=a.i(523776),ar=a.i(984295),as=a.i(677482),at=a.i(721777),au=a.i(516164),av=a.i(513358),aw=[" ","Enter","ArrowUp","ArrowDown"],ax=[" ","Enter"],ay="Select",[az,aA,aB]=(0,W.createCollection)(ay),[aC,aD]=(0,Y.createContextScope)(ay,[aB,ao.createPopperScope]),aE=(0,ao.createPopperScope)(),[aF,aG]=aC(ay),[aH,aI]=aC(ay),aJ=a=>{let{__scopeSelect:b,children:d,open:e,defaultOpen:f,onOpenChange:g,value:h,defaultValue:i,onValueChange:j,dir:k,name:l,autoComplete:m,disabled:n,required:o,form:p}=a,r=aE(b),[s,t]=q.useState(null),[u,v]=q.useState(null),[w,x]=q.useState(!1),y=(0,Z.useDirection)(k),[z,A]=(0,ar.useControllableState)({prop:e,defaultProp:f??!1,onChange:g,caller:ay}),[B,C]=(0,ar.useControllableState)({prop:h,defaultProp:i,onChange:j,caller:ay}),D=q.useRef(null),E=!s||p||!!s.closest("form"),[F,G]=q.useState(new Set),H=Array.from(F).map(a=>a.props.value).join(";");return(0,c.jsx)(ao.Root,{...r,children:(0,c.jsxs)(aF,{required:o,scope:b,trigger:s,onTriggerChange:t,valueNode:u,onValueNodeChange:v,valueNodeHasChildren:w,onValueNodeHasChildrenChange:x,contentId:(0,an.useId)(),value:B,onValueChange:C,open:z,onOpenChange:A,dir:y,triggerPointerDownPosRef:D,disabled:n,children:[(0,c.jsx)(az.Provider,{scope:b,children:(0,c.jsx)(aH,{scope:a.__scopeSelect,onNativeOptionAdd:q.useCallback(a=>{G(b=>new Set(b).add(a))},[]),onNativeOptionRemove:q.useCallback(a=>{G(b=>{let c=new Set(b);return c.delete(a),c})},[]),children:d})}),E?(0,c.jsxs)(bk,{"aria-hidden":!0,required:o,tabIndex:-1,name:l,autoComplete:m,value:B,onChange:a=>C(a.target.value),disabled:n,form:p,children:[void 0===B?(0,c.jsx)("option",{value:""}):null,Array.from(F)]},H):null]})})};aJ.displayName=ay;var aK="SelectTrigger",aL=q.forwardRef((a,b)=>{let{__scopeSelect:d,disabled:e=!1,...f}=a,g=aE(d),h=aG(aK,d),i=h.disabled||e,j=(0,X.useComposedRefs)(b,h.onTriggerChange),k=aA(d),l=q.useRef("touch"),[m,n,o]=bm(a=>{let b=k().filter(a=>!a.disabled),c=b.find(a=>a.value===h.value),d=bn(b,a,c);void 0!==d&&h.onValueChange(d.value)}),p=a=>{i||(h.onOpenChange(!0),o()),a&&(h.triggerPointerDownPosRef.current={x:Math.round(a.pageX),y:Math.round(a.pageY)})};return(0,c.jsx)(ao.Anchor,{asChild:!0,...g,children:(0,c.jsx)(ac.Primitive.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":bl(h.value)?"":void 0,...f,ref:j,onClick:(0,V.composeEventHandlers)(f.onClick,a=>{a.currentTarget.focus(),"mouse"!==l.current&&p(a)}),onPointerDown:(0,V.composeEventHandlers)(f.onPointerDown,a=>{l.current=a.pointerType;let b=a.target;b.hasPointerCapture(a.pointerId)&&b.releasePointerCapture(a.pointerId),0===a.button&&!1===a.ctrlKey&&"mouse"===a.pointerType&&(p(a),a.preventDefault())}),onKeyDown:(0,V.composeEventHandlers)(f.onKeyDown,a=>{let b=""!==m.current;a.ctrlKey||a.altKey||a.metaKey||1!==a.key.length||n(a.key),(!b||" "!==a.key)&&aw.includes(a.key)&&(p(),a.preventDefault())})})})});aL.displayName=aK;var aM="SelectValue",aN=q.forwardRef((a,b)=>{let{__scopeSelect:d,className:e,style:f,children:g,placeholder:h="",...i}=a,j=aG(aM,d),{onValueNodeHasChildrenChange:k}=j,l=void 0!==g,m=(0,X.useComposedRefs)(b,j.onValueNodeChange);return(0,as.useLayoutEffect)(()=>{k(l)},[k,l]),(0,c.jsx)(ac.Primitive.span,{...i,ref:m,style:{pointerEvents:"none"},children:bl(j.value)?(0,c.jsx)(c.Fragment,{children:h}):g})});aN.displayName=aM;var aO=q.forwardRef((a,b)=>{let{__scopeSelect:d,children:e,...f}=a;return(0,c.jsx)(ac.Primitive.span,{"aria-hidden":!0,...f,ref:b,children:e||"▼"})});aO.displayName="SelectIcon";var aP=a=>(0,c.jsx)(ap.Portal,{asChild:!0,...a});aP.displayName="SelectPortal";var aQ="SelectContent",aR=q.forwardRef((a,b)=>{let d=aG(aQ,a.__scopeSelect),[e,f]=q.useState();return((0,as.useLayoutEffect)(()=>{f(new DocumentFragment)},[]),d.open)?(0,c.jsx)(aV,{...a,ref:b}):e?T.createPortal((0,c.jsx)(aS,{scope:a.__scopeSelect,children:(0,c.jsx)(az.Slot,{scope:a.__scopeSelect,children:(0,c.jsx)("div",{children:a.children})})}),e):null});aR.displayName=aQ;var[aS,aT]=aC(aQ),aU=(0,aq.createSlot)("SelectContent.RemoveScroll"),aV=q.forwardRef((a,b)=>{let{__scopeSelect:d,position:e="item-aligned",onCloseAutoFocus:f,onEscapeKeyDown:g,onPointerDownOutside:h,side:i,sideOffset:j,align:k,alignOffset:l,arrowPadding:m,collisionBoundary:n,collisionPadding:o,sticky:p,hideWhenDetached:r,avoidCollisions:s,...t}=a,u=aG(aQ,d),[v,w]=q.useState(null),[x,y]=q.useState(null),z=(0,X.useComposedRefs)(b,a=>w(a)),[A,B]=q.useState(null),[C,D]=q.useState(null),E=aA(d),[F,G]=q.useState(!1),H=q.useRef(!1);q.useEffect(()=>{if(v)return(0,au.hideOthers)(v)},[v]),aa();let I=q.useCallback(a=>{let[b,...c]=E().map(a=>a.ref.current),[d]=c.slice(-1),e=document.activeElement;for(let c of a)if(c===e||(c?.scrollIntoView({block:"nearest"}),c===b&&x&&(x.scrollTop=0),c===d&&x&&(x.scrollTop=x.scrollHeight),c?.focus(),document.activeElement!==e))return},[E,x]),J=q.useCallback(()=>I([A,v]),[I,A,v]);q.useEffect(()=>{F&&J()},[F,J]);let{onOpenChange:K,triggerPointerDownPosRef:L}=u;q.useEffect(()=>{if(v){let a={x:0,y:0},b=b=>{a={x:Math.abs(Math.round(b.pageX)-(L.current?.x??0)),y:Math.abs(Math.round(b.pageY)-(L.current?.y??0))}},c=c=>{a.x<=10&&a.y<=10?c.preventDefault():v.contains(c.target)||K(!1),document.removeEventListener("pointermove",b),L.current=null};return null!==L.current&&(document.addEventListener("pointermove",b),document.addEventListener("pointerup",c,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",c,{capture:!0})}}},[v,K,L]),q.useEffect(()=>{let a=()=>K(!1);return window.addEventListener("blur",a),window.addEventListener("resize",a),()=>{window.removeEventListener("blur",a),window.removeEventListener("resize",a)}},[K]);let[M,N]=bm(a=>{let b=E().filter(a=>!a.disabled),c=b.find(a=>a.ref.current===document.activeElement),d=bn(b,a,c);d&&setTimeout(()=>d.ref.current.focus())}),O=q.useCallback((a,b,c)=>{let d=!H.current&&!c;(void 0!==u.value&&u.value===b||d)&&(B(a),d&&(H.current=!0))},[u.value]),P=q.useCallback(()=>v?.focus(),[v]),Q=q.useCallback((a,b,c)=>{let d=!H.current&&!c;(void 0!==u.value&&u.value===b||d)&&D(a)},[u.value]),R="popper"===e?aX:aW,S=R===aX?{side:i,sideOffset:j,align:k,alignOffset:l,arrowPadding:m,collisionBoundary:n,collisionPadding:o,sticky:p,hideWhenDetached:r,avoidCollisions:s}:{};return(0,c.jsx)(aS,{scope:d,content:v,viewport:x,onViewportChange:y,itemRefCallback:O,selectedItem:A,onItemLeave:P,itemTextRefCallback:Q,focusSelectedItem:J,selectedItemText:C,position:e,isPositioned:F,searchRef:M,children:(0,c.jsx)(av.RemoveScroll,{as:aU,allowPinchZoom:!0,children:(0,c.jsx)(ah,{asChild:!0,trapped:u.open,onMountAutoFocus:a=>{a.preventDefault()},onUnmountAutoFocus:(0,V.composeEventHandlers)(f,a=>{u.trigger?.focus({preventScroll:!0}),a.preventDefault()}),children:(0,c.jsx)($.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:g,onPointerDownOutside:h,onFocusOutside:a=>a.preventDefault(),onDismiss:()=>u.onOpenChange(!1),children:(0,c.jsx)(R,{role:"listbox",id:u.contentId,"data-state":u.open?"open":"closed",dir:u.dir,onContextMenu:a=>a.preventDefault(),...t,...S,onPlaced:()=>G(!0),ref:z,style:{display:"flex",flexDirection:"column",outline:"none",...t.style},onKeyDown:(0,V.composeEventHandlers)(t.onKeyDown,a=>{let b=a.ctrlKey||a.altKey||a.metaKey;if("Tab"===a.key&&a.preventDefault(),b||1!==a.key.length||N(a.key),["ArrowUp","ArrowDown","Home","End"].includes(a.key)){let b=E().filter(a=>!a.disabled).map(a=>a.ref.current);if(["ArrowUp","End"].includes(a.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(a.key)){let c=a.target,d=b.indexOf(c);b=b.slice(d+1)}setTimeout(()=>I(b)),a.preventDefault()}})})})})})})});aV.displayName="SelectContentImpl";var aW=q.forwardRef((a,b)=>{let{__scopeSelect:d,onPlaced:e,...f}=a,g=aG(aQ,d),h=aT(aQ,d),[i,j]=q.useState(null),[k,l]=q.useState(null),m=(0,X.useComposedRefs)(b,a=>l(a)),n=aA(d),o=q.useRef(!1),p=q.useRef(!0),{viewport:r,selectedItem:s,selectedItemText:t,focusSelectedItem:u}=h,v=q.useCallback(()=>{if(g.trigger&&g.valueNode&&i&&k&&r&&s&&t){let a=g.trigger.getBoundingClientRect(),b=k.getBoundingClientRect(),c=g.valueNode.getBoundingClientRect(),d=t.getBoundingClientRect();if("rtl"!==g.dir){let e=d.left-b.left,f=c.left-e,g=a.left-f,h=a.width+g,j=Math.max(h,b.width),k=U(f,[10,Math.max(10,window.innerWidth-10-j)]);i.style.minWidth=h+"px",i.style.left=k+"px"}else{let e=b.right-d.right,f=window.innerWidth-c.right-e,g=window.innerWidth-a.right-f,h=a.width+g,j=Math.max(h,b.width),k=U(f,[10,Math.max(10,window.innerWidth-10-j)]);i.style.minWidth=h+"px",i.style.right=k+"px"}let f=n(),h=window.innerHeight-20,j=r.scrollHeight,l=window.getComputedStyle(k),m=parseInt(l.borderTopWidth,10),p=parseInt(l.paddingTop,10),q=parseInt(l.borderBottomWidth,10),u=m+p+j+parseInt(l.paddingBottom,10)+q,v=Math.min(5*s.offsetHeight,u),w=window.getComputedStyle(r),x=parseInt(w.paddingTop,10),y=parseInt(w.paddingBottom,10),z=a.top+a.height/2-10,A=s.offsetHeight/2,B=m+p+(s.offsetTop+A);if(B<=z){let a=f.length>0&&s===f[f.length-1].ref.current;i.style.bottom="0px";let b=Math.max(h-z,A+(a?y:0)+(k.clientHeight-r.offsetTop-r.offsetHeight)+q);i.style.height=B+b+"px"}else{let a=f.length>0&&s===f[0].ref.current;i.style.top="0px";let b=Math.max(z,m+r.offsetTop+(a?x:0)+A);i.style.height=b+(u-B)+"px",r.scrollTop=B-z+r.offsetTop}i.style.margin="10px 0",i.style.minHeight=v+"px",i.style.maxHeight=h+"px",e?.(),requestAnimationFrame(()=>o.current=!0)}},[n,g.trigger,g.valueNode,i,k,r,s,t,g.dir,e]);(0,as.useLayoutEffect)(()=>v(),[v]);let[w,x]=q.useState();(0,as.useLayoutEffect)(()=>{k&&x(window.getComputedStyle(k).zIndex)},[k]);let y=q.useCallback(a=>{a&&!0===p.current&&(v(),u?.(),p.current=!1)},[v,u]);return(0,c.jsx)(aY,{scope:d,contentWrapper:i,shouldExpandOnScrollRef:o,onScrollButtonChange:y,children:(0,c.jsx)("div",{ref:j,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:(0,c.jsx)(ac.Primitive.div,{...f,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...f.style}})})})});aW.displayName="SelectItemAlignedPosition";var aX=q.forwardRef((a,b)=>{let{__scopeSelect:d,align:e="start",collisionPadding:f=10,...g}=a,h=aE(d);return(0,c.jsx)(ao.Content,{...h,...g,ref:b,align:e,collisionPadding:f,style:{boxSizing:"border-box",...g.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});aX.displayName="SelectPopperPosition";var[aY,aZ]=aC(aQ,{}),a$="SelectViewport",a_=q.forwardRef((a,b)=>{let{__scopeSelect:d,nonce:e,...f}=a,g=aT(a$,d),h=aZ(a$,d),i=(0,X.useComposedRefs)(b,g.onViewportChange),j=q.useRef(0);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:e}),(0,c.jsx)(az.Slot,{scope:d,children:(0,c.jsx)(ac.Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...f,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...f.style},onScroll:(0,V.composeEventHandlers)(f.onScroll,a=>{let b=a.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=h;if(d?.current&&c){let a=Math.abs(j.current-b.scrollTop);if(a>0){let d=window.innerHeight-20,e=Math.max(parseFloat(c.style.minHeight),parseFloat(c.style.height));if(e<d){let f=e+a,g=Math.min(d,f),h=f-g;c.style.height=g+"px","0px"===c.style.bottom&&(b.scrollTop=h>0?h:0,c.style.justifyContent="flex-end")}}}j.current=b.scrollTop})})})]})});a_.displayName=a$;var a0="SelectGroup",[a1,a2]=aC(a0);q.forwardRef((a,b)=>{let{__scopeSelect:d,...e}=a,f=(0,an.useId)();return(0,c.jsx)(a1,{scope:d,id:f,children:(0,c.jsx)(ac.Primitive.div,{role:"group","aria-labelledby":f,...e,ref:b})})}).displayName=a0;var a3="SelectLabel",a4=q.forwardRef((a,b)=>{let{__scopeSelect:d,...e}=a,f=a2(a3,d);return(0,c.jsx)(ac.Primitive.div,{id:f.id,...e,ref:b})});a4.displayName=a3;var a5="SelectItem",[a6,a7]=aC(a5),a8=q.forwardRef((a,b)=>{let{__scopeSelect:d,value:e,disabled:f=!1,textValue:g,...h}=a,i=aG(a5,d),j=aT(a5,d),k=i.value===e,[l,m]=q.useState(g??""),[n,o]=q.useState(!1),p=(0,X.useComposedRefs)(b,a=>j.itemRefCallback?.(a,e,f)),r=(0,an.useId)(),s=q.useRef("touch"),t=()=>{f||(i.onValueChange(e),i.onOpenChange(!1))};if(""===e)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,c.jsx)(a6,{scope:d,value:e,disabled:f,textId:r,isSelected:k,onItemTextChange:q.useCallback(a=>{m(b=>b||(a?.textContent??"").trim())},[]),children:(0,c.jsx)(az.ItemSlot,{scope:d,value:e,disabled:f,textValue:l,children:(0,c.jsx)(ac.Primitive.div,{role:"option","aria-labelledby":r,"data-highlighted":n?"":void 0,"aria-selected":k&&n,"data-state":k?"checked":"unchecked","aria-disabled":f||void 0,"data-disabled":f?"":void 0,tabIndex:f?void 0:-1,...h,ref:p,onFocus:(0,V.composeEventHandlers)(h.onFocus,()=>o(!0)),onBlur:(0,V.composeEventHandlers)(h.onBlur,()=>o(!1)),onClick:(0,V.composeEventHandlers)(h.onClick,()=>{"mouse"!==s.current&&t()}),onPointerUp:(0,V.composeEventHandlers)(h.onPointerUp,()=>{"mouse"===s.current&&t()}),onPointerDown:(0,V.composeEventHandlers)(h.onPointerDown,a=>{s.current=a.pointerType}),onPointerMove:(0,V.composeEventHandlers)(h.onPointerMove,a=>{s.current=a.pointerType,f?j.onItemLeave?.():"mouse"===s.current&&a.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,V.composeEventHandlers)(h.onPointerLeave,a=>{a.currentTarget===document.activeElement&&j.onItemLeave?.()}),onKeyDown:(0,V.composeEventHandlers)(h.onKeyDown,a=>{(j.searchRef?.current===""||" "!==a.key)&&(ax.includes(a.key)&&t()," "===a.key&&a.preventDefault())})})})})});a8.displayName=a5;var a9="SelectItemText",ba=q.forwardRef((a,b)=>{let{__scopeSelect:d,className:e,style:f,...g}=a,h=aG(a9,d),i=aT(a9,d),j=a7(a9,d),k=aI(a9,d),[l,m]=q.useState(null),n=(0,X.useComposedRefs)(b,a=>m(a),j.onItemTextChange,a=>i.itemTextRefCallback?.(a,j.value,j.disabled)),o=l?.textContent,p=q.useMemo(()=>(0,c.jsx)("option",{value:j.value,disabled:j.disabled,children:o},j.value),[j.disabled,j.value,o]),{onNativeOptionAdd:r,onNativeOptionRemove:s}=k;return(0,as.useLayoutEffect)(()=>(r(p),()=>s(p)),[r,s,p]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ac.Primitive.span,{id:j.textId,...g,ref:n}),j.isSelected&&h.valueNode&&!h.valueNodeHasChildren?T.createPortal(g.children,h.valueNode):null]})});ba.displayName=a9;var bb="SelectItemIndicator",bc=q.forwardRef((a,b)=>{let{__scopeSelect:d,...e}=a;return a7(bb,d).isSelected?(0,c.jsx)(ac.Primitive.span,{"aria-hidden":!0,...e,ref:b}):null});bc.displayName=bb;var bd="SelectScrollUpButton",be=q.forwardRef((a,b)=>{let d=aT(bd,a.__scopeSelect),e=aZ(bd,a.__scopeSelect),[f,g]=q.useState(!1),h=(0,X.useComposedRefs)(b,e.onScrollButtonChange);return(0,as.useLayoutEffect)(()=>{if(d.viewport&&d.isPositioned){let a=function(){g(b.scrollTop>0)},b=d.viewport;return a(),b.addEventListener("scroll",a),()=>b.removeEventListener("scroll",a)}},[d.viewport,d.isPositioned]),f?(0,c.jsx)(bh,{...a,ref:h,onAutoScroll:()=>{let{viewport:a,selectedItem:b}=d;a&&b&&(a.scrollTop=a.scrollTop-b.offsetHeight)}}):null});be.displayName=bd;var bf="SelectScrollDownButton",bg=q.forwardRef((a,b)=>{let d=aT(bf,a.__scopeSelect),e=aZ(bf,a.__scopeSelect),[f,g]=q.useState(!1),h=(0,X.useComposedRefs)(b,e.onScrollButtonChange);return(0,as.useLayoutEffect)(()=>{if(d.viewport&&d.isPositioned){let a=function(){let a=b.scrollHeight-b.clientHeight;g(Math.ceil(b.scrollTop)<a)},b=d.viewport;return a(),b.addEventListener("scroll",a),()=>b.removeEventListener("scroll",a)}},[d.viewport,d.isPositioned]),f?(0,c.jsx)(bh,{...a,ref:h,onAutoScroll:()=>{let{viewport:a,selectedItem:b}=d;a&&b&&(a.scrollTop=a.scrollTop+b.offsetHeight)}}):null});bg.displayName=bf;var bh=q.forwardRef((a,b)=>{let{__scopeSelect:d,onAutoScroll:e,...f}=a,g=aT("SelectScrollButton",d),h=q.useRef(null),i=aA(d),j=q.useCallback(()=>{null!==h.current&&(window.clearInterval(h.current),h.current=null)},[]);return q.useEffect(()=>()=>j(),[j]),(0,as.useLayoutEffect)(()=>{let a=i().find(a=>a.ref.current===document.activeElement);a?.ref.current?.scrollIntoView({block:"nearest"})},[i]),(0,c.jsx)(ac.Primitive.div,{"aria-hidden":!0,...f,ref:b,style:{flexShrink:0,...f.style},onPointerDown:(0,V.composeEventHandlers)(f.onPointerDown,()=>{null===h.current&&(h.current=window.setInterval(e,50))}),onPointerMove:(0,V.composeEventHandlers)(f.onPointerMove,()=>{g.onItemLeave?.(),null===h.current&&(h.current=window.setInterval(e,50))}),onPointerLeave:(0,V.composeEventHandlers)(f.onPointerLeave,()=>{j()})})}),bi=q.forwardRef((a,b)=>{let{__scopeSelect:d,...e}=a;return(0,c.jsx)(ac.Primitive.div,{"aria-hidden":!0,...e,ref:b})});bi.displayName="SelectSeparator";var bj="SelectArrow";q.forwardRef((a,b)=>{let{__scopeSelect:d,...e}=a,f=aE(d),g=aG(bj,d),h=aT(bj,d);return g.open&&"popper"===h.position?(0,c.jsx)(ao.Arrow,{...f,...e,ref:b}):null}).displayName=bj;var bk=q.forwardRef(({__scopeSelect:a,value:b,...d},e)=>{let f,g=q.useRef(null),h=(0,X.useComposedRefs)(e,g),i=(f=q.useRef({value:b,previous:b}),q.useMemo(()=>(f.current.value!==b&&(f.current.previous=f.current.value,f.current.value=b),f.current.previous),[b]));return q.useEffect(()=>{let a=g.current;if(!a)return;let c=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(i!==b&&c){let d=new Event("change",{bubbles:!0});c.call(a,b),a.dispatchEvent(d)}},[i,b]),(0,c.jsx)(ac.Primitive.select,{...d,style:{...at.VISUALLY_HIDDEN_STYLES,...d.style},ref:h,defaultValue:b})});function bl(a){return""===a||void 0===a}function bm(a){let b=(0,ad.useCallbackRef)(a),c=q.useRef(""),d=q.useRef(0),e=q.useCallback(a=>{let e=c.current+a;b(e),function a(b){c.current=b,window.clearTimeout(d.current),""!==b&&(d.current=window.setTimeout(()=>a(""),1e3))}(e)},[b]),f=q.useCallback(()=>{c.current="",window.clearTimeout(d.current)},[]);return q.useEffect(()=>()=>window.clearTimeout(d.current),[]),[c,e,f]}function bn(a,b,c){var d,e;let f=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,g=c?a.indexOf(c):-1,h=(d=a,e=Math.max(g,0),d.map((a,b)=>d[(e+b)%d.length]));1===f.length&&(h=h.filter(a=>a!==c));let i=h.find(a=>a.textValue.toLowerCase().startsWith(f.toLowerCase()));return i!==c?i:void 0}bk.displayName="SelectBubbleInput";var bo=a.i(602774);let bp=(0,j.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),bq=(0,j.default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),br=q.forwardRef(({className:a,children:b,...d},e)=>(0,c.jsxs)(aL,{ref:e,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...d,children:[b,(0,c.jsx)(aO,{asChild:!0,children:(0,c.jsx)(bp,{className:"h-4 w-4 opacity-50"})})]}));br.displayName=aL.displayName;let bs=q.forwardRef(({className:a,...b},d)=>(0,c.jsx)(be,{ref:d,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,c.jsx)(bq,{className:"h-4 w-4"})}));bs.displayName=be.displayName;let bt=q.forwardRef(({className:a,...b},d)=>(0,c.jsx)(bg,{ref:d,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,c.jsx)(bp,{className:"h-4 w-4"})}));bt.displayName=bg.displayName;let bu=q.forwardRef(({className:a,children:b,position:d="popper",...e},f)=>(0,c.jsx)(aP,{children:(0,c.jsxs)(aR,{ref:f,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:d,...e,children:[(0,c.jsx)(bs,{}),(0,c.jsx)(a_,{className:(0,u.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:b}),(0,c.jsx)(bt,{})]})}));bu.displayName=aR.displayName,q.forwardRef(({className:a,...b},d)=>(0,c.jsx)(a4,{ref:d,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...b})).displayName=a4.displayName;let bv=q.forwardRef(({className:a,children:b,...d},e)=>(0,c.jsxs)(a8,{ref:e,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,c.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,c.jsx)(bc,{children:(0,c.jsx)(bo.Check,{className:"h-4 w-4"})})}),(0,c.jsx)(ba,{children:b})]}));bv.displayName=a8.displayName,q.forwardRef(({className:a,...b},d)=>(0,c.jsx)(bi,{ref:d,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",a),...b})).displayName=bi.displayName;var bw=a.i(470903),bx=a.i(26790);function by({selectionCount:a,onClearSelection:b,actions:d,itemLabel:e="items",className:f}){if(0===a)return null;let g=1===a?e.replace(/s$/,""):e;return(0,c.jsxs)("div",{className:(0,u.cn)("fixed bottom-6 left-1/2 -translate-x-1/2 z-50","flex items-center gap-3 px-4 py-2.5 rounded-lg","bg-primary text-primary-foreground shadow-lg","animate-in fade-in slide-in-from-bottom-4 duration-200",f),children:[(0,c.jsxs)("span",{className:"text-sm font-medium",children:[a," ",g," selected"]}),d&&(0,c.jsx)("div",{className:"flex items-center gap-2 border-l border-primary-foreground/20 pl-3",children:d}),(0,c.jsxs)(t.Button,{variant:"ghost",size:"sm",className:"h-7 px-2 text-primary-foreground hover:bg-primary-foreground/10 hover:text-primary-foreground",onClick:b,children:[(0,c.jsx)(bx.X,{className:"h-4 w-4"}),(0,c.jsx)("span",{className:"sr-only",children:"Clear selection"})]})]})}var bz=a.i(93354),bA=a.i(303872),bB=a.i(784145),bC=a.i(600980),bD=a.i(338032),bE=a.i(926133),bF=a.i(532718),bG=a.i(496443),bH=a.i(925182),bI="Checkbox",[bJ,bK]=(0,bC.createContextScope)(bI),[bL,bM]=bJ(bI),bN=q.forwardRef((a,b)=>{let{__scopeCheckbox:d,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j="on",onCheckedChange:k,form:l,...m}=a,[n,o]=q.useState(null),p=(0,bB.useComposedRefs)(b,a=>o(a)),r=q.useRef(!1),s=!n||l||!!n.closest("form"),[t=!1,u]=(0,bE.useControllableState)({prop:f,defaultProp:g,onChange:k}),v=q.useRef(t);return q.useEffect(()=>{let a=n?.form;if(a){let b=()=>u(v.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[n,u]),(0,c.jsxs)(bL,{scope:d,state:t,disabled:i,children:[(0,c.jsx)(bH.Primitive.button,{type:"button",role:"checkbox","aria-checked":bR(t)?"mixed":t,"aria-required":h,"data-state":bS(t),"data-disabled":i?"":void 0,disabled:i,value:j,...m,ref:p,onKeyDown:(0,bD.composeEventHandlers)(a.onKeyDown,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,bD.composeEventHandlers)(a.onClick,a=>{u(a=>!!bR(a)||!a),s&&(r.current=a.isPropagationStopped(),r.current||a.stopPropagation())})}),s&&(0,c.jsx)(bQ,{control:n,bubbles:!r.current,name:e,value:j,checked:t,required:h,disabled:i,form:l,style:{transform:"translateX(-100%)"},defaultChecked:!bR(g)&&g})]})});bN.displayName=bI;var bO="CheckboxIndicator",bP=q.forwardRef((a,b)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=bM(bO,d);return(0,c.jsx)(bG.Presence,{present:e||bR(g.state)||!0===g.state,children:(0,c.jsx)(bH.Primitive.span,{"data-state":bS(g.state),"data-disabled":g.disabled?"":void 0,...f,ref:b,style:{pointerEvents:"none",...a.style}})})});bP.displayName=bO;var bQ=a=>{let b,{control:d,checked:e,bubbles:f=!0,defaultChecked:g,...h}=a,i=q.useRef(null),j=(b=q.useRef({value:e,previous:e}),q.useMemo(()=>(b.current.value!==e&&(b.current.previous=b.current.value,b.current.value=e),b.current.previous),[e])),k=(0,bF.useSize)(d);q.useEffect(()=>{let a=i.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(j!==e&&b){let c=new Event("click",{bubbles:f});a.indeterminate=bR(e),b.call(a,!bR(e)&&e),a.dispatchEvent(c)}},[j,e,f]);let l=q.useRef(!bR(e)&&e);return(0,c.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:g??l.current,...h,tabIndex:-1,ref:i,style:{...a.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function bR(a){return"indeterminate"===a}function bS(a){return bR(a)?"indeterminate":a?"checked":"unchecked"}let bT=(0,j.default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),bU=q.forwardRef(({className:a,checked:b,indeterminate:d,onCheckedChange:e,...f},g)=>{let h=q.useId(),i=f.id??h;return(0,c.jsx)("label",{htmlFor:i,className:"p-2 -m-2 inline-flex items-center justify-center cursor-pointer",onClick:a=>a.stopPropagation(),onKeyDown:a=>a.stopPropagation(),children:(0,c.jsx)(bN,{ref:g,id:i,checked:d?"indeterminate":b??!1,onCheckedChange:a=>{e?.(!0===a)},className:(0,u.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground","data-[state=indeterminate]:bg-primary data-[state=indeterminate]:text-primary-foreground",a),...f,children:(0,c.jsx)(bP,{className:"flex items-center justify-center text-current",children:d?(0,c.jsx)(bT,{className:"h-3.5 w-3.5"}):(0,c.jsx)(bo.Check,{className:"h-3.5 w-3.5"})})})})});function bV({env:a,runId:b,runStatus:d,onSuccess:e}){let[f,g]=(0,q.useState)(void 0),[h,i]=(0,q.useState)(!0),[j,k]=(0,q.useState)(void 0),l=j?.status||d;return(0,q.useEffect)(()=>{i(!0),Promise.all([(0,O.fetchRun)(a,b,"none"),(0,N.fetchEvents)(a,b,{limit:1e3,sortOrder:"desc"})]).then(([a,b])=>{a.success&&k(a.data),b.success&&g(b.data.data)}).catch(a=>{console.error("Failed to fetch run or events:",a)}).finally(()=>{i(!1)})},[a,b]),(0,c.jsx)(bA.RunActionsDropdownItems,{env:a,runId:b,runStatus:l,events:f,eventsLoading:h,stopPropagation:!0,callbacks:{onSuccess:e}})}function bW({env:a,runId:b,runStatus:d,onSuccess:e}){let[f,g]=(0,q.useState)(!1);return(0,c.jsxs)(z.DropdownMenu,{open:f,onOpenChange:g,children:[(0,c.jsx)(z.DropdownMenuTrigger,{asChild:!0,children:(0,c.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:a=>a.stopPropagation(),children:(0,c.jsx)(m.MoreHorizontal,{className:"h-4 w-4"})})}),f&&(0,c.jsx)(z.DropdownMenuContent,{align:"end",children:(0,c.jsx)(bV,{env:a,runId:b,runStatus:d,onSuccess:e})})]})}bU.displayName="Checkbox";let bX={pending:{label:"Pending",color:"bg-neutral-600 dark:bg-neutral-400"},running:{label:"Running",color:"bg-blue-600 dark:bg-blue-400"},completed:{label:"Completed",color:"bg-green-600 dark:bg-green-400"},failed:{label:"Failed",color:"bg-red-600 dark:bg-red-400"},cancelled:{label:"Cancelled",color:"bg-gray-600 dark:bg-gray-400"}};function bY({workflowNameFilter:a,status:b,seenWorkflowNames:d,sortOrder:e,loading:f,statusFilterRequiresWorkflowNameFilter:g,onWorkflowChange:h,onStatusChange:i,onSortToggle:j,onRefresh:k,lastRefreshTime:l}){return(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-end gap-2",children:[(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last refreshed"}),l&&(0,c.jsx)(I.RelativeTime,{date:l,className:"text-sm text-muted-foreground",type:"distance"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsxs)(aJ,{value:a??"all",onValueChange:h,disabled:f,children:[(0,c.jsx)(br,{className:"w-[180px] h-9",children:(0,c.jsx)(aN,{placeholder:"Filter by workflow"})}),(0,c.jsxs)(bu,{children:[(0,c.jsx)(bv,{value:"all",children:"All Workflows"}),Array.from(d).sort().map(a=>(0,c.jsx)(bv,{value:a,children:(0,M.parseWorkflowName)(a)?.shortName||a},a))]})]}),(0,c.jsxs)(G.Tooltip,{children:[(0,c.jsx)(G.TooltipTrigger,{asChild:!0,children:(0,c.jsx)("div",{children:(0,c.jsxs)(aJ,{value:b||"all",onValueChange:i,disabled:f||g&&!a,children:[(0,c.jsx)(br,{className:"w-[140px] h-9",children:(0,c.jsx)(aN,{placeholder:"Filter by status"})}),(0,c.jsxs)(bu,{children:[(0,c.jsx)(bv,{value:"all",children:"Any status"}),Object.entries(bX).map(([a,{label:b,color:d}])=>(0,c.jsx)(bv,{value:a,children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("span",{className:`${d} size-1.5 rounded-full mr-2`}),b]})},a))]})]})})}),(0,c.jsx)(G.TooltipContent,{children:g&&"all"===a?"Select a workflow first to filter by status":"Filter runs by status"})]}),(0,c.jsxs)(G.Tooltip,{children:[(0,c.jsx)(G.TooltipTrigger,{asChild:!0,children:(0,c.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:j,disabled:f,children:["desc"===e?(0,c.jsx)(P,{className:"h-4 w-4"}):(0,c.jsx)(Q,{className:"h-4 w-4"}),"desc"===e?"Newest":"Oldest"]})}),(0,c.jsx)(G.TooltipContent,{children:"desc"===e?"Showing newest first":"Showing oldest first"})]}),(0,c.jsxs)(G.Tooltip,{children:[(0,c.jsx)(G.TooltipTrigger,{asChild:!0,children:(0,c.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:k,disabled:f,children:[(0,c.jsx)(n,{className:f?"animate-spin":""}),"Refresh"]})}),(0,c.jsx)(G.TooltipContent,{children:"Note that this resets pages"})]})]})]})}function bZ({onRunClick:a}){let b,d,g,h,j,m,n=(0,e.useSearchParams)(),o=(b=(0,e.useRouter)(),d=(0,e.usePathname)(),g=(0,e.useSearchParams)(),(0,q.useCallback)(a=>{let c=new URLSearchParams(g.toString());"all"===a?(c.delete("workflow"),c.delete("status")):c.set("workflow",a),b.push(`${d}?${c.toString()}`)},[b,d,g])),u=(h=(0,e.useRouter)(),j=(0,e.usePathname)(),m=(0,e.useSearchParams)(),(0,q.useCallback)(a=>{let b=new URLSearchParams(m.toString());"all"===a?b.delete("status"):b.set("status",a),h.push(`${j}?${b.toString()}`)},[h,j,m])),{serverConfig:x}=(0,bw.useServerConfig)(),y=n.get("status"),z=Object.keys(bX),J="all"===y||y&&z.includes(y)?y:void 0,K=n.get("workflow"),[L,N]=(0,q.useState)("desc"),[O,P]=(0,q.useState)(()=>new Date),[Q,T]=(0,q.useState)(!1),U=(0,q.useMemo)(()=>({}),[]),V="local"===x.backendId||"@workflow/world-local"===x.backendId,W=x.displayInfo?.["local.dataDirPath"],X=x.displayInfo?.["local.shortName"],Y=x.backendId?.includes("vercel")||!1,[Z,$]=(0,q.useState)(new Set),{data:_,error:aa,nextPage:ab,previousPage:ac,hasNextPage:ad,hasPreviousPage:ae,reload:af,pageInfo:ag}=(0,f.useWorkflowRuns)(U,{sortOrder:L,workflowName:"all"===K?void 0:K,status:"all"===J?void 0:J}),ah=function({getItemId:a}){let[b,c]=(0,q.useState)(new Set),d=(0,q.useCallback)(c=>b.has(a(c)),[b,a]),e=(0,q.useCallback)(b=>{let d=a(b);c(a=>{let b=new Set(a);return b.has(d)?b.delete(d):b.add(d),b})},[a]),f=(0,q.useCallback)(b=>{c(new Set(b.map(a)))},[a]),g=(0,q.useCallback)(()=>{c(new Set)},[]),h=(0,q.useCallback)(c=>0!==c.length&&c.every(c=>b.has(a(c))),[b,a]),i=(0,q.useCallback)(c=>{if(0===c.length)return!1;let d=c.some(c=>b.has(a(c))),e=c.every(c=>b.has(a(c)));return d&&!e},[b,a]),j=(0,q.useCallback)(a=>{h(a)?g():f(a)},[h,g,f]),k=(0,q.useCallback)(a=>{c(b=>{let c=new Set(b);return c.add(a),c})},[]),l=(0,q.useCallback)(a=>{c(b=>{let c=new Set(b);return c.delete(a),c})},[]),m=b.size;return(0,q.useMemo)(()=>({selectedIds:b,isSelected:d,toggleSelection:e,selectAll:f,clearSelection:g,toggleSelectAll:j,selectionCount:m,isAllSelected:h,isSomeSelected:i,selectById:k,deselectById:l}),[b,d,e,f,g,j,m,h,i,k,l])}({getItemId:a=>a.runId}),ai=_.data??[],[aj,ak]=(0,q.useState)(!1),[al,am]=(0,q.useState)(!1),an=V&&(!W||!_?.data?.length);(0,q.useEffect)(()=>{if(_.data&&_.data.length>0){let a=new Set(_.data.map(a=>a.workflowName));$(b=>{let c=new Set(b);for(let b of a)c.add(b);return c})}},[_.data]);let ao=_.isLoading;(0,q.useEffect)(()=>{ao||Q||T(!0)},[ao,Q]),(0,q.useEffect)(()=>{T(!1)},[K,J,L]);let ap=(0,q.useCallback)(()=>{P(()=>new Date),T(!1),af()},[af]),aq=(0,q.useMemo)(()=>ai.filter(a=>ah.selectedIds.has(a.runId)),[ai,ah.selectedIds]),ar=(0,q.useMemo)(()=>aq.filter(a=>"pending"===a.status||"running"===a.status),[aq]),as=ar.length>0,at=(0,q.useCallback)(async()=>{if(!aj&&0!==ar.length){ak(!0);try{let a=await Promise.allSettled(ar.map(a=>(0,f.cancelRun)(U,a.runId))),b=a.filter(a=>"fulfilled"===a.status).length,c=a.filter(a=>"rejected"===a.status).length;0===c?r.toast.success(`Cancelled ${b} run${1!==b?"s":""}`):0===b?r.toast.error(`Failed to cancel ${c} run${1!==c?"s":""}`):r.toast.warning(`Cancelled ${b} run${1!==b?"s":""}, ${c} failed`),ah.clearSelection(),ap()}catch(a){r.toast.error("Failed to cancel runs",{description:a instanceof Error?a.message:"Unknown error"})}finally{ak(!1)}}},[U,ar,aj,ah,ap]),au=(0,q.useCallback)(async()=>{if(!al&&0!==aq.length){am(!0);try{let a=await Promise.allSettled(aq.map(a=>(0,f.reenqueueRun)(U,a.runId))),b=a.filter(a=>"fulfilled"===a.status).length,c=a.filter(a=>"rejected"===a.status).length;0===c?r.toast.success(`Re-enqueued ${b} run${1!==b?"s":""}`):0===b?r.toast.error(`Failed to re-enqueue ${c} run${1!==c?"s":""}`):r.toast.warning(`Re-enqueued ${b} run${1!==b?"s":""}, ${c} failed`),ah.clearSelection(),ap()}catch(a){r.toast.error("Failed to re-enqueue runs",{description:a instanceof Error?a.message:"Unknown error"})}finally{am(!1)}}},[U,aq,al,ah,ap]);(0,q.useEffect)(()=>{if(an){let a=setInterval(()=>{ap()},5e3);return()=>clearInterval(a)}},[an,ap]),(0,q.useEffect)(()=>{let a=()=>{"visible"===document.visibilityState&&O&&Date.now()-O.getTime()>=1e4&&ap()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[O,ap]);let av=(0,c.jsx)("code",{className:"font-mono",children:X||"current directory"});return(0,c.jsxs)("div",{children:[(0,c.jsx)(bY,{workflowNameFilter:K,status:J,seenWorkflowNames:Z,sortOrder:L,loading:ao,statusFilterRequiresWorkflowNameFilter:Y,onWorkflowChange:o,onStatusChange:u,onSortToggle:()=>{N(a=>"desc"===a?"asc":"desc")},onRefresh:ap,lastRefreshTime:O}),(0,c.jsx)(v,{className:"overflow-hidden mt-4 bg-background",children:(0,c.jsx)(w,{className:"p-0 max-h-[calc(100vh-280px)] overflow-auto",children:(0,c.jsxs)(A,{children:[(0,c.jsx)(B,{children:(0,c.jsxs)(D,{children:[(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10 w-10",children:(0,c.jsx)(bU,{checked:ah.isAllSelected(ai),indeterminate:ah.isSomeSelected(ai),onCheckedChange:()=>ah.toggleSelectAll(ai),"aria-label":"Select all runs",disabled:!ai.length})}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Workflow"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Run ID"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Status"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Started"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Completed"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10 w-10"})]})}),(0,c.jsx)(C,{children:aa?(0,c.jsx)(D,{children:(0,c.jsx)(F,{colSpan:7,className:"h-[400px]",children:(0,c.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,c.jsxs)(s.Alert,{variant:"destructive",className:"max-w-md",children:[(0,c.jsx)(i.AlertCircle,{className:"h-4 w-4"}),(0,c.jsx)(s.AlertTitle,{children:"Error loading runs"}),(0,c.jsx)(s.AlertDescription,{children:(0,f.getErrorMessage)(aa)})]})})})}):ao&&!Q?(0,c.jsx)(D,{children:(0,c.jsx)(F,{colSpan:7,className:"h-[400px]",children:(0,c.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,c.jsx)(R.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})}):_.data&&0!==_.data.length?ai.map(b=>(0,c.jsxs)(D,{className:"cursor-pointer group relative",onClick:()=>a(b.runId),"data-selected":ah.isSelected(b),children:[(0,c.jsx)(F,{className:"py-2",children:(0,c.jsx)(bU,{checked:ah.isSelected(b),onCheckedChange:()=>ah.toggleSelection(b),"aria-label":`Select run ${b.runId}`})}),(0,c.jsx)(F,{className:"py-2",children:(0,c.jsx)(H.CopyableText,{text:b.workflowName,overlay:!0,children:(0,M.parseWorkflowName)(b.workflowName)?.shortName||"?"})}),(0,c.jsx)(F,{className:"font-mono text-xs py-2",children:(0,c.jsx)(H.CopyableText,{text:b.runId,overlay:!0,children:b.runId})}),(0,c.jsx)(F,{className:"py-2",children:(0,c.jsx)(bz.StatusBadge,{status:b.status,context:b,durationMs:b.startedAt?(b.completedAt?new Date(b.completedAt).getTime():Date.now())-new Date(b.startedAt).getTime():void 0})}),(0,c.jsx)(F,{className:"py-2 text-muted-foreground text-xs",children:b.startedAt?(0,c.jsx)(I.RelativeTime,{date:b.startedAt}):"-"}),(0,c.jsx)(F,{className:"py-2 text-muted-foreground text-xs",children:b.completedAt?(0,c.jsx)(I.RelativeTime,{date:b.completedAt}):"-"}),(0,c.jsx)(F,{className:"py-2",children:(0,c.jsx)(bW,{env:U,runId:b.runId,runStatus:b.status,onSuccess:ap})})]},b.runId)):(0,c.jsx)(D,{children:(0,c.jsx)(F,{colSpan:7,className:"h-[400px]",children:(0,c.jsxs)("div",{className:"text-sm text-center text-muted-foreground flex flex-col items-center justify-center gap-3 h-full",children:[(0,c.jsxs)("span",{className:"text-sm",children:["No workflow runs found",an?(0,c.jsxs)(c.Fragment,{children:[" in ",av]}):"","."]}),an&&(0,c.jsx)("span",{className:"text-sm flex items-center gap-2",children:"This view will update once you run a workflow."})]})})})})]})})}),(0,c.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,c.jsx)("div",{className:"text-sm text-muted-foreground",children:ag}),(0,c.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,c.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:ac,disabled:!ae,children:[(0,c.jsx)(k,{}),"Previous"]}),(0,c.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:ab,disabled:!ad,children:["Next",(0,c.jsx)(l.ChevronRight,{})]})]})]}),(0,c.jsx)(by,{selectionCount:ah.selectionCount,onClearSelection:ah.clearSelection,itemLabel:"runs",actions:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(G.Tooltip,{children:[(0,c.jsx)(G.TooltipTrigger,{asChild:!0,children:(0,c.jsxs)(t.Button,{variant:"ghost",size:"sm",className:"h-7 text-primary-foreground hover:bg-primary-foreground/10 hover:text-primary-foreground",onClick:au,disabled:al||0===aq.length,children:[al?(0,c.jsx)(R.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,c.jsx)(S.Zap,{className:"h-4 w-4 mr-1"}),al?"Re-enqueuing...":"Re-enqueue"]})}),(0,c.jsx)(G.TooltipContent,{children:"Re-enqueue the workflow orchestration layer for selected runs. Useful if workflows appear stuck."})]}),as&&(0,c.jsxs)(t.Button,{variant:"ghost",size:"sm",className:"h-7 text-primary-foreground hover:bg-primary-foreground/10 hover:text-primary-foreground",onClick:at,disabled:aj,children:[aj?(0,c.jsx)(R.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,c.jsx)(p.XCircle,{className:"h-4 w-4 mr-1"}),"Cancel"," ",ar.length!==ah.selectionCount?`${ar.length} `:"",aj?"cancelling...":""]})]})})]})}var b$=a.i(725538);a.i(92552);var b_=a.i(487582),b0=a.i(60408);let b1=(0,j.default)("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);var b2=a.i(706998),b3=a.i(904730),b4=a.i(200866),b5="Dialog",[b6,b7]=(0,Y.createContextScope)(b5),[b8,b9]=b6(b5),ca=a=>{let{__scopeDialog:b,children:d,open:e,defaultOpen:f,onOpenChange:g,modal:h=!0}=a,i=q.useRef(null),j=q.useRef(null),[k,l]=(0,ar.useControllableState)({prop:e,defaultProp:f??!1,onChange:g,caller:b5});return(0,c.jsx)(b8,{scope:b,triggerRef:i,contentRef:j,contentId:(0,an.useId)(),titleId:(0,an.useId)(),descriptionId:(0,an.useId)(),open:k,onOpenChange:l,onOpenToggle:q.useCallback(()=>l(a=>!a),[l]),modal:h,children:d})};ca.displayName=b5;var cb="DialogTrigger";q.forwardRef((a,b)=>{let{__scopeDialog:d,...e}=a,f=b9(cb,d),g=(0,X.useComposedRefs)(b,f.triggerRef);return(0,c.jsx)(ac.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":f.open,"aria-controls":f.contentId,"data-state":cv(f.open),...e,ref:g,onClick:(0,V.composeEventHandlers)(a.onClick,f.onOpenToggle)})}).displayName=cb;var cc="DialogPortal",[cd,ce]=b6(cc,{forceMount:void 0}),cf=a=>{let{__scopeDialog:b,forceMount:d,children:e,container:f}=a,g=b9(cc,b);return(0,c.jsx)(cd,{scope:b,forceMount:d,children:q.Children.map(e,a=>(0,c.jsx)(b4.Presence,{present:d||g.open,children:(0,c.jsx)(ap.Portal,{asChild:!0,container:f,children:a})}))})};cf.displayName=cc;var cg="DialogOverlay",ch=q.forwardRef((a,b)=>{let d=ce(cg,a.__scopeDialog),{forceMount:e=d.forceMount,...f}=a,g=b9(cg,a.__scopeDialog);return g.modal?(0,c.jsx)(b4.Presence,{present:e||g.open,children:(0,c.jsx)(cj,{...f,ref:b})}):null});ch.displayName=cg;var ci=(0,aq.createSlot)("DialogOverlay.RemoveScroll"),cj=q.forwardRef((a,b)=>{let{__scopeDialog:d,...e}=a,f=b9(cg,d);return(0,c.jsx)(av.RemoveScroll,{as:ci,allowPinchZoom:!0,shards:[f.contentRef],children:(0,c.jsx)(ac.Primitive.div,{"data-state":cv(f.open),...e,ref:b,style:{pointerEvents:"auto",...e.style}})})}),ck="DialogContent",cl=q.forwardRef((a,b)=>{let d=ce(ck,a.__scopeDialog),{forceMount:e=d.forceMount,...f}=a,g=b9(ck,a.__scopeDialog);return(0,c.jsx)(b4.Presence,{present:e||g.open,children:g.modal?(0,c.jsx)(cm,{...f,ref:b}):(0,c.jsx)(cn,{...f,ref:b})})});cl.displayName=ck;var cm=q.forwardRef((a,b)=>{let d=b9(ck,a.__scopeDialog),e=q.useRef(null),f=(0,X.useComposedRefs)(b,d.contentRef,e);return q.useEffect(()=>{let a=e.current;if(a)return(0,au.hideOthers)(a)},[]),(0,c.jsx)(co,{...a,ref:f,trapFocus:d.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,V.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),d.triggerRef.current?.focus()}),onPointerDownOutside:(0,V.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,V.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault())})}),cn=q.forwardRef((a,b)=>{let d=b9(ck,a.__scopeDialog),e=q.useRef(!1),f=q.useRef(!1);return(0,c.jsx)(co,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(e.current||d.triggerRef.current?.focus(),b.preventDefault()),e.current=!1,f.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(e.current=!0,"pointerdown"===b.detail.originalEvent.type&&(f.current=!0));let c=b.target;d.triggerRef.current?.contains(c)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&f.current&&b.preventDefault()}})}),co=q.forwardRef((a,b)=>{let{__scopeDialog:d,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:g,...h}=a,i=b9(ck,d),j=q.useRef(null),k=(0,X.useComposedRefs)(b,j);return aa(),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ah,{asChild:!0,loop:!0,trapped:e,onMountAutoFocus:f,onUnmountAutoFocus:g,children:(0,c.jsx)($.DismissableLayer,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":cv(i.open),...h,ref:k,onDismiss:()=>i.onOpenChange(!1)})}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(cz,{titleId:i.titleId}),(0,c.jsx)(cA,{contentRef:j,descriptionId:i.descriptionId})]})]})}),cp="DialogTitle",cq=q.forwardRef((a,b)=>{let{__scopeDialog:d,...e}=a,f=b9(cp,d);return(0,c.jsx)(ac.Primitive.h2,{id:f.titleId,...e,ref:b})});cq.displayName=cp;var cr="DialogDescription",cs=q.forwardRef((a,b)=>{let{__scopeDialog:d,...e}=a,f=b9(cr,d);return(0,c.jsx)(ac.Primitive.p,{id:f.descriptionId,...e,ref:b})});cs.displayName=cr;var ct="DialogClose",cu=q.forwardRef((a,b)=>{let{__scopeDialog:d,...e}=a,f=b9(ct,d);return(0,c.jsx)(ac.Primitive.button,{type:"button",...e,ref:b,onClick:(0,V.composeEventHandlers)(a.onClick,()=>f.onOpenChange(!1))})});function cv(a){return a?"open":"closed"}cu.displayName=ct;var cw="DialogTitleWarning",[cx,cy]=(0,Y.createContext)(cw,{contentName:ck,titleName:cp,docsSlug:"dialog"}),cz=({titleId:a})=>{let b=cy(cw),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return q.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},cA=({contentRef:a,descriptionId:b})=>{let c=cy("DialogDescriptionWarning"),d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return q.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(d))},[d,a,b]),null},cB=a.i(930840),cB=cB;function cC({...a}){return(0,c.jsx)(ca,{"data-slot":"sheet",...a})}function cD({...a}){return(0,c.jsx)(cf,{"data-slot":"sheet-portal",...a})}function cE({className:a,...b}){return(0,c.jsx)(ch,{"data-slot":"sheet-overlay",className:(0,u.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function cF({className:a,children:b,side:d="right",...e}){return(0,c.jsxs)(cD,{children:[(0,c.jsx)(cE,{}),(0,c.jsxs)(cl,{"data-slot":"sheet-content",className:(0,u.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===d&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===d&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===d&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===d&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",a),...e,children:[b,(0,c.jsxs)(cu,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,c.jsx)(cB.default,{className:"size-4"}),(0,c.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function cG({className:a,...b}){return(0,c.jsx)("div",{"data-slot":"sheet-header",className:(0,u.cn)("flex flex-col gap-1.5 p-4",a),...b})}function cH({className:a,...b}){return(0,c.jsx)(cq,{"data-slot":"sheet-title",className:(0,u.cn)("text-foreground font-semibold",a),...b})}function cI({className:a,...b}){return(0,c.jsx)(cs,{"data-slot":"sheet-description",className:(0,u.cn)("text-muted-foreground text-sm",a),...b})}var cJ=a.i(691435);function cK({onWorkflowSelect:a}){let[b,d]=(0,q.useState)(!1),[e,f]=(0,q.useState)(null),{manifest:g,loading:h,error:j}=(0,cJ.useWorkflowGraphManifest)(),k=g?Object.values(g.workflows):[],l=(0,q.useMemo)(()=>[...k].sort((a,b)=>a.workflowName.localeCompare(b.workflowName)),[k]),m=(0,q.useMemo)(()=>e?.nodes.filter(a=>"step"===a.data.nodeKind).length??0,[e]);return h?(0,c.jsx)(K,{variant:"workflows",rows:6}):j?(0,c.jsxs)(s.Alert,{variant:"destructive",children:[(0,c.jsx)(i.AlertCircle,{className:"h-4 w-4"}),(0,c.jsx)(s.AlertTitle,{children:"Error Loading Workflows"}),(0,c.jsx)(s.AlertDescription,{children:j.message})]}):0===k.length?(0,c.jsx)(v,{children:(0,c.jsxs)(w,{className:"p-12 text-center",children:[(0,c.jsx)(b1,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,c.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Workflows Found"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"No workflow definitions were found in the graph manifest."})]})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(v,{className:"overflow-hidden bg-background",children:(0,c.jsx)(w,{className:"p-0 max-h-[calc(100vh-200px)] overflow-auto",children:(0,c.jsxs)(A,{children:[(0,c.jsx)(B,{children:(0,c.jsxs)(D,{children:[(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Workflow"}),(0,c.jsx)(E,{className:"sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"File"}),(0,c.jsx)(E,{className:"text-center sticky top-0 bg-background z-10 border-b shadow-sm h-10",children:"Steps"})]})}),(0,c.jsx)(C,{children:l.map(b=>{let e=b.nodes.filter(a=>"step"===a.data.nodeKind).length;return(0,c.jsxs)(D,{className:"cursor-pointer",onClick:()=>{f(b),d(!0),a?.(b.workflowName)},children:[(0,c.jsx)(F,{className:"py-2",children:(0,c.jsx)("span",{className:"font-medium",children:b.workflowName})}),(0,c.jsx)(F,{className:"py-2",children:(0,c.jsx)("code",{className:"text-xs text-muted-foreground",children:b.filePath})}),(0,c.jsx)(F,{className:"text-center py-2",children:(0,c.jsxs)(b3.Badge,{variant:"secondary",className:"gap-1",children:[(0,c.jsx)(b0.GitBranch,{className:"h-3 w-3"}),e," ",(0,b_.pluralize)("step","steps",e)]})})]},b.workflowId)})})]})})}),(0,c.jsx)(cC,{open:b,onOpenChange:d,children:(0,c.jsxs)(cF,{side:"right",className:"w-[75vw] max-w-[75vw] sm:max-w-[75vw]",children:[(0,c.jsxs)(cG,{children:[(0,c.jsxs)(cH,{className:"flex items-center gap-2",children:[(0,c.jsx)(b1,{className:"h-5 w-5"}),e?.workflowName]}),e&&(0,c.jsx)(cI,{asChild:!0,children:(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("code",{className:"text-xs",children:e.filePath}),(0,c.jsx)("div",{children:(0,c.jsxs)(b3.Badge,{variant:"outline",className:"gap-1",children:[(0,c.jsx)(b0.GitBranch,{className:"h-3 w-3"}),m," ",(0,b_.pluralize)("step","steps",m)]})})]})})]}),(0,c.jsx)("div",{className:"mt-6 h-[calc(100vh-180px)]",children:e&&(0,c.jsx)(b2.WorkflowGraphViewer,{workflow:e})})]})})]})}var cL=a.i(47318);function cM(){let a=(0,e.useRouter)(),{serverConfig:b}=(0,bw.useServerConfig)(),[f]=(0,cL.useSidebarState)(),[g]=(0,cL.useHookIdState)(),[h,i]=(0,cL.useTabState)(),j="local"===b.backendId||"@workflow/world-local"===b.backendId;return(0,c.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,c.jsxs)(b$.Tabs,{value:h,onValueChange:i,className:"w-full",children:[(0,c.jsxs)(b$.TabsList,{className:"mb-4",children:[(0,c.jsx)(b$.TabsTrigger,{value:"runs",children:"Runs"}),(0,c.jsx)(b$.TabsTrigger,{value:"hooks",children:"Hooks"}),j&&(0,c.jsx)(b$.TabsTrigger,{value:"workflows",children:"Workflows"})]}),(0,c.jsx)(b$.TabsContent,{value:"runs",children:(0,c.jsx)(d.ErrorBoundary,{title:"Runs Error",description:"Failed to load workflow runs. Please try refreshing the page.",children:(0,c.jsx)(bZ,{onRunClick:(b,c)=>{c?a.push(`/run/${b}/streams/${c}`):a.push(`/run/${b}`)}})})}),(0,c.jsx)(b$.TabsContent,{value:"hooks",children:(0,c.jsx)(d.ErrorBoundary,{title:"Hooks Error",description:"Failed to load hooks. Please try refreshing the page.",children:(0,c.jsx)(L,{onHookClick:(b,c)=>{b?a.push(`/run/${c}?sidebar=hook&hookId=${b}`):a.push(`/run/${c}`)},selectedHookId:"hook"===f&&g?g:void 0})})}),j&&(0,c.jsx)(b$.TabsContent,{value:"workflows",children:(0,c.jsx)(d.ErrorBoundary,{title:"Workflows Error",description:"Failed to load workflow graph data. Please try refreshing the page.",children:(0,c.jsx)(cK,{})})})]})})}a.s(["default",()=>cM],762587)}];

//# sourceMappingURL=packages_web_src_app_page_tsx_cd282e82._.js.map