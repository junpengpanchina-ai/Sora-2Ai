# Veo Pro å®šä»·ç³»ç»Ÿå®ç°æ€»ç»“

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ•°æ®åº“è¿ç§»ï¼ˆ046_add_veo_pro_pricing_system.sqlï¼‰

- âœ… æ·»åŠ  `is_starter_pack` å­—æ®µåˆ° `recharge_records` è¡¨
- âœ… æ·»åŠ  `model_type` å­—æ®µåˆ° `consumption_records` è¡¨
- âœ… åˆ›å»º `starter_pack_daily_limits` è¡¨ï¼ˆé™é¢‘è®°å½•ï¼‰
- âœ… åˆ›å»º `veo_pro_usage_logs` è¡¨ï¼ˆåŸ‹ç‚¹è¿½è¸ªï¼‰
- âœ… åˆ›å»º `user_behavior_flags` è¡¨ï¼ˆé˜²è–…æœºåˆ¶ï¼‰
- âœ… åˆ›å»ºç›¸å…³å‡½æ•°ï¼š`has_active_starter_pack`, `check_daily_limit`, `increment_daily_limit`

### 2. ç§¯åˆ†ç³»ç»Ÿæ›´æ–°ï¼ˆlib/credits.tsï¼‰

- âœ… å®ç°æŒ‰æ¨¡å‹ç±»å‹çš„å·®å¼‚åŒ–å®šä»·ï¼š
  - Sora: 10 credits = 1 video
  - Veo Fast: 80 credits = 1 videoï¼ˆå¯¹åº” $0.99ï¼‰
  - Veo Pro: 400 credits = 1 videoï¼ˆå¯¹åº” $3.99ï¼‰
- âœ… æ›´æ–° `deductCredits` å‡½æ•°æ”¯æŒæ¨¡å‹ç±»å‹å‚æ•°
- âœ… Veo Pro å¤±è´¥è‡ªåŠ¨è¿”è¿˜ç§¯åˆ†

### 3. Starter Pack é™é¢‘ç³»ç»Ÿï¼ˆlib/starter-pack-limits.tsï¼‰

- âœ… `hasActiveStarterPack`: æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æ´»è·ƒçš„ Starter Pack
- âœ… `checkDailyLimit`: æ£€æŸ¥ç”¨æˆ·ä»Šæ—¥æ˜¯å¦è¶…è¿‡é™é¢‘
  - Veo Pro: æ¯æ—¥æœ€å¤š 2 æ¬¡
  - Veo Fast: æ¯æ—¥æœ€å¤š 3 æ¬¡
  - Sora: ä¸é™é¢‘
- âœ… `incrementDailyLimit`: å¢åŠ æ¯æ—¥ä½¿ç”¨æ¬¡æ•°
- âœ… `logVeoUsage`: è®°å½• Veo ä½¿ç”¨æ—¥å¿—ï¼ˆåŸ‹ç‚¹ï¼‰
- âœ… `updateVeoUsageLog`: æ›´æ–°ä½¿ç”¨æ—¥å¿—çŠ¶æ€

### 4. è§†é¢‘ç”Ÿæˆ API æ›´æ–°ï¼ˆapp/api/video/generate/route.tsï¼‰

- âœ… é›†æˆé™é¢‘æ£€æŸ¥ï¼ˆåœ¨æ‰£é™¤ç§¯åˆ†å‰æ£€æŸ¥ï¼‰
- âœ… é›†æˆæ–°çš„ç§¯åˆ†ç³»ç»Ÿï¼ˆæŒ‰æ¨¡å‹ç±»å‹æ‰£é™¤ç§¯åˆ†ï¼‰
- âœ… Veo Pro å¤±è´¥è‡ªåŠ¨è¿”è¿˜ç§¯åˆ†
- âœ… è®°å½• Veo ä½¿ç”¨æ—¥å¿—
- âœ… å¢åŠ æ¯æ—¥ä½¿ç”¨æ¬¡æ•°ï¼ˆæˆåŠŸæ—¶ï¼‰

### 5. Veo Pro æ¨èç»„ä»¶ï¼ˆcomponents/VeoProRecommendation.tsxï¼‰

- âœ… åˆ›å»ºæ¨èç»„ä»¶ï¼Œåœ¨å¤±è´¥/é‡è¯•æ—¶æ˜¾ç¤º
- âœ… ä¸æ‰“æ‰°ä½†å¿…ç„¶å‡çº§çš„ç­–ç•¥
- âœ… åªåœ¨ç”¨æˆ·å·²ç»ä»˜å‡ºæˆæœ¬æ—¶æ¨è

### 6. è§†é¢‘é¡µé¢æ›´æ–°ï¼ˆapp/video/VideoPageClient.tsxï¼‰

- âœ… é›†æˆ Veo Pro æ¨èç»„ä»¶
- âœ… è·Ÿè¸ªé‡è¯•æ¬¡æ•°
- âœ… åœ¨å¤±è´¥/é‡è¯•æ—¶æ˜¾ç¤ºæ¨è

## ğŸ“‹ å¾…å®Œæˆçš„åŠŸèƒ½

### 1. æ›´æ–° PricingModal

éœ€è¦æ›´æ–° `components/PricingModal.tsx` æ˜¾ç¤ºæ–°çš„å®šä»·ç»“æ„ï¼š
- Sora: 10 credits = 1 videoï¼ˆæ°¸ä¹…ç§¯åˆ†ï¼‰
- Veo Fast: $0.99 / generationï¼ˆ80 creditsï¼‰
- Veo Pro: $3.99 / generationï¼ˆ400 creditsï¼‰
- Starter Pack: $4.9ï¼ˆé™é¢‘ï¼šVeo Pro 2æ¬¡/å¤©ï¼ŒVeo Fast 3æ¬¡/å¤©ï¼‰

### 2. é˜²è–…æœºåˆ¶å®ç°

éœ€è¦å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼ˆlib/anti-abuse.tsï¼‰ï¼š
- é‡è¯•è¡Œä¸ºé™çº§ï¼šåŒ prompt è¿ç»­å¤±è´¥/é‡è¯•ï¼Œè‡ªåŠ¨å»¶è¿Ÿè¿”è¿˜ï¼Œå¼ºåˆ¶ Veo Fast
- å¼‚å¸¸è¡Œä¸ºè½¯é™åˆ¶ï¼š24h è¿ç»­é«˜é¢‘ã€prompt é«˜åº¦é‡å¤ã€IP/UA å¼‚å¸¸æ—¶ï¼Œä¸´æ—¶ç¦ç”¨ Proï¼Œä¸å°å·

### 3. æ•°æ®åº“ç±»å‹å®šä¹‰æ›´æ–°

éœ€è¦æ›´æ–° `types/database.ts` æ·»åŠ æ–°è¡¨çš„ç±»å‹å®šä¹‰ã€‚

### 4. å……å€¼è®°å½•æ ‡è¯† Starter Pack

éœ€è¦åœ¨åˆ›å»ºå……å€¼è®°å½•æ—¶ï¼Œå¦‚æœé‡‘é¢æ˜¯ $4.9ï¼Œè‡ªåŠ¨è®¾ç½® `is_starter_pack = true`ã€‚

## ğŸš€ æ‰§è¡Œæ­¥éª¤

### Step 1: æ‰§è¡Œæ•°æ®åº“è¿ç§»

åœ¨ Supabase Dashboard çš„ SQL Editor ä¸­æ‰§è¡Œï¼š
```sql
-- æ–‡ä»¶ï¼šsupabase/migrations/046_add_veo_pro_pricing_system.sql
```

### Step 2: æ›´æ–°æ•°æ®åº“ç±»å‹å®šä¹‰

è¿è¡Œï¼š
```bash
npx supabase gen types typescript --project-id <your-project-id> > types/database.ts
```

### Step 3: æµ‹è¯•åŠŸèƒ½

1. æµ‹è¯•é™é¢‘åŠŸèƒ½ï¼šè´­ä¹° Starter Packï¼Œå°è¯•ä½¿ç”¨ Veo Pro/Fast
2. æµ‹è¯•ç§¯åˆ†æ‰£é™¤ï¼šä¸åŒæ¨¡å‹ç±»å‹æ‰£é™¤ä¸åŒç§¯åˆ†
3. æµ‹è¯• Veo Pro æ¨èï¼šå¤±è´¥/é‡è¯•æ—¶æ˜¾ç¤ºæ¨è
4. æµ‹è¯•è‡ªåŠ¨è¿”è¿˜ï¼šVeo Pro å¤±è´¥æ—¶è‡ªåŠ¨è¿”è¿˜ç§¯åˆ†

## ğŸ“Š å®šä»·ç»“æ„

| æ¨¡å‹ | ç§¯åˆ†æ¶ˆè€— | ç¾å…ƒä»·æ ¼ | ç”¨é€” |
|------|---------|---------|------|
| Sora | 10 credits | - | åŸºç¡€ç”Ÿäº§åŠ›ï¼Œæ°¸ä¹…ç§¯åˆ† |
| Veo Fast | 80 credits | $0.99 | Draft/Testing |
| Veo Pro | 400 credits | $3.99 | å•†ç”¨æ¨èï¼Œå¤±è´¥è‡ªåŠ¨è¿”è¿˜ |

### Starter Pack ($4.9)

- åŒ…å« Sora creditsï¼ˆä¸»ï¼‰
- Veo Pro: æ¯å¤©æœ€å¤š 2 æ¬¡
- Veo Fast: æ¯å¤©æœ€å¤š 3 æ¬¡
- æ™®é€šç”¨æˆ·æ— æ„Ÿï¼Œå·¥ä½œå®¤æ•ˆç‡ç›´æ¥å´©æºƒ

## ğŸ¯ æ ¸å¿ƒç­–ç•¥

1. **Sora æ˜¯åŸºç¡€ç”Ÿäº§åŠ›**ï¼Œä¸æ˜¯"ä¾¿å®œæ›¿ä»£å“"
2. **Veo Fast æ˜¯å¯¹æ¯”å±‚**ï¼Œè®© Veo Pro æ˜¾å¾—"å€¼"
3. **Veo Pro æ˜¯ç›ˆåˆ©å±‚**ï¼Œå–çš„æ˜¯"å°‘å¤±è´¥ã€å°‘é‡è¯•ã€å°‘æ—¶é—´æµªè´¹"
4. **4.9 ç¾é‡‘å¼•æµåŒ…**ï¼Œä½†ä¸ä¼šè¢«è–…ï¼ˆé™é¢‘æœºåˆ¶ï¼‰

## ğŸ“ æ³¨æ„äº‹é¡¹

1. æ‰€æœ‰ç§¯åˆ†éƒ½æ˜¯æ°¸ä¹…æœ‰æ•ˆçš„
2. Veo Pro å¤±è´¥è‡ªåŠ¨è¿”è¿˜ç§¯åˆ†ï¼ˆå…¶ä»–æ¨¡å‹ä¹Ÿè¿”è¿˜ï¼Œä½† Veo Pro æ˜¯æ˜ç¡®æ‰¿è¯ºï¼‰
3. é™é¢‘åªé’ˆå¯¹ Starter Pack ç”¨æˆ·
4. æ¨èåªåœ¨ç”¨æˆ·å·²ç»ä»˜å‡ºæˆæœ¬æ—¶æ˜¾ç¤ºï¼ˆå¤±è´¥/é‡è¯•æ—¶ï¼‰

