# âœ… æœ€ç®€å•çš„ Stripe é…ç½®æ–¹æ¡ˆ

## ğŸ¯ å¥½æ¶ˆæ¯ï¼šä¸éœ€è¦é…ç½® Payment Links çš„é‡å®šå‘äº†ï¼

æˆ‘å·²ç»æ›´æ–°äº†ä»£ç ï¼Œç°åœ¨ä½¿ç”¨ **Checkout Session** è€Œä¸æ˜¯ Payment Linksã€‚è¿™æ ·ä½ å°±ä¸éœ€è¦åœ¨ Stripe Dashboard ä¸­æ‰¾é‚£äº›è®¾ç½®é€‰é¡¹äº†ã€‚

## ğŸ“ ç°åœ¨åªéœ€è¦åš 2 ä»¶äº‹ï¼š

### 1. è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¿…é¡»ï¼‰

åœ¨ Vercel Dashboardï¼š
1. è¿›å…¥é¡¹ç›® â†’ **Settings** â†’ **Environment Variables**
2. æ·»åŠ ï¼š
   - **Key**: `STRIPE_SECRET_KEY`
   - **Value**: ä½ çš„ Stripe Secret Keyï¼ˆä» Stripe Dashboard â†’ Developers â†’ API keys è·å–ï¼‰
   - **Environment**: å…¨é€‰ï¼ˆProduction, Preview, Developmentï¼‰
3. ä¿å­˜å¹¶é‡æ–°éƒ¨ç½²

### 2. æµ‹è¯•æ”¯ä»˜æµç¨‹ï¼ˆéªŒè¯ï¼‰

1. è®¿é—®ä½ çš„ç½‘ç«™ `/pricing` é¡µé¢
2. ç‚¹å‡»ä»»æ„æ¡£ä½çš„è´­ä¹°æŒ‰é’®
3. åº”è¯¥è·³è½¬åˆ° Stripe Checkout é¡µé¢ï¼ˆä¸æ˜¯ Payment Linkï¼‰
4. ä½¿ç”¨æµ‹è¯•å¡æ”¯ä»˜ï¼š
   - å¡å·: `4242 4242 4242 4242`
   - è¿‡æœŸ: `12/25`
   - CVC: `123`
5. æ”¯ä»˜æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ° `/billing/success`
6. ç§¯åˆ†è‡ªåŠ¨å…¥è´¦

## ğŸ”„ ä»£ç å·²æ›´æ–°

### æ–°çš„ API: `/api/payment/create-plan-checkout`
- âœ… åˆ›å»º Checkout Sessionï¼ˆè€Œä¸æ˜¯ä½¿ç”¨ Payment Linkï¼‰
- âœ… å®Œå…¨æ§åˆ¶ Success URL å’Œ Cancel URL
- âœ… è‡ªåŠ¨è¯†åˆ«æ¡£ä½ï¼ˆé€šè¿‡ metadataï¼‰

### æ›´æ–°çš„é¡µé¢: `/app/pricing/page.tsx`
- âœ… ç‚¹å‡»è´­ä¹°æ—¶è°ƒç”¨ API åˆ›å»º Checkout Session
- âœ… è‡ªåŠ¨è·³è½¬åˆ° Stripe Checkout
- âœ… æ”¯ä»˜æˆåŠŸåè‡ªåŠ¨è·³è½¬å›ç½‘ç«™

## ğŸ‰ ä¼˜åŠ¿

ä½¿ç”¨ Checkout Session çš„å¥½å¤„ï¼š
- âœ… **ä¸éœ€è¦åœ¨ Stripe Dashboard é…ç½®é‡å®šå‘**ï¼ˆä»£ç ä¸­å·²è®¾ç½®ï¼‰
- âœ… **å®Œå…¨æ§åˆ¶**ï¼šSuccess URL å’Œ Cancel URL åœ¨ä»£ç ä¸­å®šä¹‰
- âœ… **æ›´çµæ´»**ï¼šå¯ä»¥æ·»åŠ è‡ªå®šä¹‰ metadata
- âœ… **æ›´å¯é **ï¼šä¸ä¾èµ– Payment Link çš„è®¾ç½®

## âš ï¸ é‡è¦æç¤º

1. **ç¯å¢ƒå˜é‡å¿…é¡»è®¾ç½®**ï¼š`STRIPE_SECRET_KEY` æ˜¯å¿…éœ€çš„
2. **åŸŸåæ›¿æ¢**ï¼šè¯·æ›¿æ¢ä¸ºä½ çš„å®é™…åŸŸåï¼š
   - `app/api/payment/create-plan-checkout/route.ts` ä¸­çš„ `baseUrl`
   - `app/api/billing/finalize/route.ts` ä¸­çš„ URLï¼ˆå¦‚æœéœ€è¦ï¼‰

## ğŸ§ª æµ‹è¯•æ­¥éª¤

1. âœ… è®¾ç½®ç¯å¢ƒå˜é‡ `STRIPE_SECRET_KEY`
2. âœ… é‡æ–°éƒ¨ç½²é¡¹ç›®
3. âœ… è®¿é—® `/pricing` é¡µé¢
4. âœ… ç‚¹å‡»è´­ä¹°æŒ‰é’®
5. âœ… å®Œæˆæµ‹è¯•æ”¯ä»˜
6. âœ… éªŒè¯ç§¯åˆ†å…¥è´¦

---

**å®Œæˆï¼** ç°åœ¨ä½ ä¸éœ€è¦åœ¨ Stripe Dashboard ä¸­æ‰¾é‚£äº›è®¾ç½®é€‰é¡¹äº†ï¼Œæ‰€æœ‰é…ç½®éƒ½åœ¨ä»£ç ä¸­å®Œæˆã€‚

