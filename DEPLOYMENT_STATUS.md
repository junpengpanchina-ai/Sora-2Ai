# ğŸ“Š éƒ¨ç½²çŠ¶æ€è·Ÿè¸ª

## âœ… å·²å®Œæˆ

### æ­¥éª¤ 2: è®¾ç½®ç¯å¢ƒå˜é‡ âœ…
- [x] åœ¨ Stripe Dashboard è·å– Secret Key
- [x] åœ¨ Vercel Dashboard æ·»åŠ  `STRIPE_SECRET_KEY`
- [x] ç¯å¢ƒå˜é‡å·²è®¾ç½®

**ä¸‹ä¸€æ­¥**: ç¡®è®¤é¡¹ç›®å·²é‡æ–°éƒ¨ç½²ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

---

## â³ å¾…å®Œæˆ

### æ­¥éª¤ 1: æ‰§è¡Œæ•°æ®åº“è¿ç§» âš ï¸ **å¿…é¡»å…ˆå®Œæˆ**

**æ“ä½œ**:
1. è®¿é—® https://supabase.com/dashboard
2. é€‰æ‹©é¡¹ç›® â†’ **SQL Editor** â†’ **New query**
3. æ‰“å¼€ `supabase/migrations/049_add_wallet_system_complete.sql`
4. å¤åˆ¶å…¨éƒ¨å†…å®¹ï¼ˆ298è¡Œï¼‰
5. ç²˜è´´åˆ° SQL Editor â†’ ç‚¹å‡» **Run**

**éªŒè¯**ï¼ˆåœ¨ SQL Editor ä¸­æ‰§è¡Œï¼‰:
```sql
-- æ£€æŸ¥è¡¨ï¼ˆåº”è¯¥è¿”å› 5 è¡Œï¼‰
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name IN ('wallets', 'user_entitlements', 'usage_daily', 'purchases', 'risk_devices')
ORDER BY table_name;

-- æ£€æŸ¥å‡½æ•°ï¼ˆåº”è¯¥è¿”å› 3 è¡Œï¼‰
SELECT routine_name FROM information_schema.routines 
WHERE routine_schema = 'public' 
AND routine_name IN ('deduct_credits', 'check_and_increment_daily_usage', 'apply_purchase')
ORDER BY routine_name;
```

âœ… **å®Œæˆæ ‡å¿—**: çœ‹åˆ° 5 ä¸ªè¡¨å’Œ 3 ä¸ªå‡½æ•°

---

### æ­¥éª¤ 3: æµ‹è¯•æ”¯ä»˜æµç¨‹ï¼ˆåœ¨æ­¥éª¤ 1 å®Œæˆåæ‰§è¡Œï¼‰

**æ“ä½œ**:
1. è®¿é—® `/pricing` é¡µé¢
2. ç‚¹å‡»ä»»æ„æ¡£ä½çš„ **"Get"** æŒ‰é’®
3. åº”è¯¥è·³è½¬åˆ° Stripe Checkout
4. ä½¿ç”¨æµ‹è¯•å¡æ”¯ä»˜:
   - å¡å·: `4242 4242 4242 4242`
   - è¿‡æœŸ: `12/25`
   - CVC: `123`
   - é‚®ç¼–: `12345`
5. æ”¯ä»˜æˆåŠŸååº”è·³è½¬åˆ° `/billing/success`
6. é¡µé¢åº”æ˜¾ç¤º "âœ… Credits added successfully!"

**éªŒè¯**:
- [ ] è·³è½¬åˆ° Stripe Checkout æˆåŠŸ
- [ ] æ”¯ä»˜æˆåŠŸ
- [ ] è·³è½¬åˆ° `/billing/success` æˆåŠŸ
- [ ] ç§¯åˆ†å·²å…¥è´¦ï¼ˆæ£€æŸ¥ Supabase `wallets` è¡¨ï¼‰

---

## ğŸ”„ å½“å‰çŠ¶æ€

- âœ… **æ­¥éª¤ 2**: ç¯å¢ƒå˜é‡å·²è®¾ç½®
- â³ **æ­¥éª¤ 1**: ç­‰å¾…æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼ˆå¿…é¡»å…ˆå®Œæˆï¼‰
- â³ **æ­¥éª¤ 3**: ç­‰å¾…æµ‹è¯•æ”¯ä»˜æµç¨‹ï¼ˆåœ¨æ­¥éª¤ 1 å®Œæˆåï¼‰

---

## âš ï¸ é‡è¦æé†’

**å¿…é¡»å…ˆå®Œæˆæ­¥éª¤ 1ï¼ˆæ•°æ®åº“è¿ç§»ï¼‰**ï¼Œå¦åˆ™ï¼š
- æ”¯ä»˜æˆåŠŸåæ— æ³•å…¥è´¦ï¼ˆç¼ºå°‘ `wallets` è¡¨ï¼‰
- ç§¯åˆ†æ‰£é™¤ä¼šå¤±è´¥ï¼ˆç¼ºå°‘ `deduct_credits` å‡½æ•°ï¼‰
- Starter é™é¢ä¸ç”Ÿæ•ˆï¼ˆç¼ºå°‘ `usage_daily` è¡¨ï¼‰

---

## ğŸ“ ä¸‹ä¸€æ­¥æ“ä½œ

1. **ç«‹å³æ‰§è¡Œ**: æ­¥éª¤ 1 - æ•°æ®åº“è¿ç§»ï¼ˆ5-10åˆ†é’Ÿï¼‰
2. **ç„¶åæ‰§è¡Œ**: æ­¥éª¤ 3 - æµ‹è¯•æ”¯ä»˜æµç¨‹ï¼ˆ5åˆ†é’Ÿï¼‰

---

**æœ€åæ›´æ–°**: 2026-01-07

