"use strict";exports.id=5045,exports.ids=[5045],exports.modules={65045:(e,l,a)=>{a.d(l,{selectModelForIndustryScene:()=>n});var o=a(23770);async function t(e){try{let l=await (0,o.createServiceClient)(),{data:a,error:t}=await l.from("scene_model_configs").select("default_model, fallback_model, ultimate_model, hot_industry_model, cold_industry_model, professional_industry_model, is_enabled").eq("use_case_type",e).eq("is_enabled",!0).single();if(t){if("PGRST116"===t.code)return null;throw t}if(!a)return null;return{default_model:a.default_model||"gemini-2.5-flash",fallback_model:a.fallback_model||null,ultimate_model:a.ultimate_model||null,hot_industry_model:a.hot_industry_model||null,cold_industry_model:a.cold_industry_model||null,professional_industry_model:a.professional_industry_model||null,is_enabled:a.is_enabled}}catch(l){return console.error(`[model-selector] 获取场景配置失败 (${e}):`,l),null}}async function d(e,l){try{let a=await (0,o.createServiceClient)(),{data:t,error:d}=await a.from("industry_scene_model_configs").select("default_model, fallback_model, ultimate_model, is_enabled, industry_category, industry_tier").eq("industry",e).eq("use_case_type",l).eq("is_enabled",!0).single();if(d){if("PGRST116"===d.code)return null;throw d}if(!t)return null;return{default_model:t.default_model||"gemini-2.5-flash",fallback_model:t.fallback_model||null,ultimate_model:t.ultimate_model||null,is_enabled:t.is_enabled,industry_category:t.industry_category,industry_tier:t.industry_tier}}catch(a){return console.error(`[model-selector] 获取配置失败 (${e}, ${l}):`,a),null}}async function n(e,l,a=1){let o=await t(l);if(o&&o.is_enabled){let t=i(e),d=!t&&!r(e),n=r(e),s=o.default_model,m=`场景应用配置（${l}）`;return(t&&o.hot_industry_model?(s=o.hot_industry_model,m=`场景应用配置 - 热门行业模型`):d&&o.cold_industry_model?(s=o.cold_industry_model,m=`场景应用配置 - 冷门行业模型`):n&&o.professional_industry_model&&(s=o.professional_industry_model,m=`场景应用配置 - 专业行业模型`),1===a)?{model:s,reason:`${m}: ${s}`,shouldFallback:!!o.fallback_model,nextFallback:o.fallback_model||void 0}:2===a&&o.fallback_model?{model:o.fallback_model,reason:`场景应用配置 - Fallback模型: ${o.fallback_model}`,shouldFallback:!!o.ultimate_model,nextFallback:o.ultimate_model||void 0}:3===a&&o.ultimate_model?{model:o.ultimate_model,reason:`场景应用配置 - 终极模型: ${o.ultimate_model}`,shouldFallback:!1}:{model:o.ultimate_model||o.fallback_model||s,reason:"场景应用配置 - 所有模型都已尝试",shouldFallback:!1}}let n=await d(e,l);if(n&&n.is_enabled){if(1===a)return{model:n.default_model,reason:`行业\xd7场景配置: ${n.default_model}`,shouldFallback:!!n.fallback_model,nextFallback:n.fallback_model||void 0};if(2===a&&n.fallback_model)return{model:n.fallback_model,reason:`行业\xd7场景配置 - Fallback: ${n.fallback_model}`,shouldFallback:!!n.ultimate_model,nextFallback:n.ultimate_model||void 0};if(3===a&&n.ultimate_model)return{model:n.ultimate_model,reason:`行业\xd7场景配置 - 终极: ${n.ultimate_model}`,shouldFallback:!1}}let s=i(e);return r(e)?{model:"gemini-3-flash",reason:"专业行业默认使用gemini-3-flash",shouldFallback:!0,nextFallback:"gemini-3-pro"}:s?{model:"gemini-2.5-flash",reason:"热门行业默认使用gemini-2.5-flash",shouldFallback:!0,nextFallback:"gemini-3-flash"}:{model:"gemini-3-flash",reason:"冷门行业默认使用gemini-3-flash",shouldFallback:!0,nextFallback:"gemini-3-pro"}}function i(e){return["E-commerce","SaaS","Mobile Apps","Online Courses","Creators","Influencers","Social Media","Marketing","Brand","Fashion","Beauty","Fitness","Restaurant","Travel"].some(l=>e.toLowerCase().includes(l.toLowerCase()))}function r(e){return["Medical","Healthcare","Dental","Legal","Law","Finance","Fintech","Engineering","Manufacturing","Cybersecurity","Cloud Services","Enterprise","B2B"].some(l=>e.toLowerCase().includes(l.toLowerCase()))}}};