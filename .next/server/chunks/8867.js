"use strict";exports.id=8867,exports.ids=[8867],exports.modules={88867:(e,t,n)=>{function s(e){try{let t=[],n=[],s=100;e.h1&&0!==e.h1.trim().length?e.h1.length<10&&(n.push("H1 标题过短"),s-=5):(t.push("missing_h1"),s-=20),e.title&&0!==e.title.trim().length||(t.push("missing_title"),s-=15),e.description&&0!==e.description.trim().length?e.description.length<50?(n.push("描述过短（建议至少 50 字）"),s-=5):e.description.length>300&&(n.push("描述过长（建议不超过 300 字）"),s-=3):(t.push("missing_description"),s-=15);let o=e.content?.length||0;if(0===o?(t.push("content_too_short"),s-=30):o<300?(t.push("content_too_short"),s-=20):o<500?(n.push("内容较短（建议至少 500 字）"),s-=10):o>5e3&&(n.push("内容过长（建议不超过 5000 字）"),s-=5),e.seo_keywords&&0!==e.seo_keywords.length?e.seo_keywords.length<2&&(n.push("SEO 关键词过少（建议至少 2 个）"),s-=5):(t.push("missing_keywords"),s-=10),e.content){let o=(e.content.match(/^##\s+/gm)||[]).length;if(0===o?(t.push("poor_formatting"),s-=15):o<3&&(n.push("内容结构不完整（建议至少 3 个 H2 标题）"),s-=5),e.content.toLowerCase().includes("example prompt")||e.content.toLowerCase().includes("prompt example")||e.content.includes("```")||(t.push("missing_example_prompt"),s-=10),e.seo_keywords&&e.seo_keywords.length>0){let n=e.seo_keywords[0].toLowerCase();(e.content.toLowerCase().match(RegExp(n,"g"))||[]).length>10&&(t.push("keyword_stuffing"),s-=15)}let i=e.content.split("\n\n");i.filter(e=>e.length>300).length>.3*i.length&&(n.push("部分段落过长，可能影响可读性"),s-=5);let r=(e.content||"").toLowerCase(),h=(e.title||"").toLowerCase(),l=(e.description||"").toLowerCase(),c=(e.h1||"").toLowerCase(),a=!1;if(r)try{let e=`${h}
${l}
${r}`,t=["video duration","duration","seconds long","second video","video length","clip","时长","视频时长","generated video","生成一个"];if(["video","generate","create","prompt","duration","seconds","second","clip","视频","生成","时长"].some(t=>e.includes(t))){let n;let s=/\b([2-9][0-9]|[1-9]\d{2,})\s*[-\s]*(seconds?|sec|s|秒)\b/gi;for(;null!==(n=s.exec(e));){let e=parseInt(n[1],10);if(10!==e&&15!==e){a=!0;break}}if(!a){let s=/\b(\d+)\s*[-\s]*(minutes?|mins?|分钟)\b/gi;for(;null!==(n=s.exec(e));){let s=n.index,o=e.slice(Math.max(0,s-80),Math.min(e.length,s+80)),i=t.some(e=>o.includes(e)),r=["service","express","appointment","预约","服务","wait"].some(e=>o.includes(e)),h=["walk","drive","away","from","nearby","distance"].some(e=>o.includes(e));if(i&&!r&&!h){a=!0;break}}}}}catch(e){console.error("[checkContentQuality] video duration check failed:",e),a=!1}a&&(t.push("incorrect_video_duration"),s-=20,n.push("内容中提到了错误的视频时长（应该是 10 秒或 15 秒，不是分钟）"));let d=e=>{let t=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","from","as","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","must","can","this","that","these","those","how","what","when","where","why","which","who","whom","whose","ai","video","generation","create","generate","use","using","used"]);return e.split(/\s+/).map(e=>e.replace(/[^\w]/g,"").toLowerCase()).filter(e=>e.length>=3&&!t.has(e))},u=d(h),p=d(l),g=d(c),m=[...new Set([...u,...p,...g])];if(m.length>0){let e=m.filter(e=>r.includes(e)).length/m.length;e<.3?(t.push("content_mismatch"),s-=25,n.push(`内容与标题/描述不匹配（仅匹配 ${Math.round(100*e)}% 的关键词）`)):e<.5&&(n.push(`内容与标题/描述匹配度较低（仅匹配 ${Math.round(100*e)}% 的关键词）`),s-=10)}}return s=Math.max(0,Math.min(100,s)),{passed:0===t.length&&s>=60,score:s,issues:t,warnings:n}}catch(t){return console.error("[checkContentQuality] 质量检查过程中发生错误:",t),console.error("[checkContentQuality] 错误堆栈:",t instanceof Error?t.stack:"No stack trace"),console.error("[checkContentQuality] 输入内容:",{titleLength:e.title?.length||0,h1Length:e.h1?.length||0,descriptionLength:e.description?.length||0,contentLength:e.content?.length||0,keywordsCount:e.seo_keywords?.length||0}),{passed:!1,score:0,issues:["quality_check_error"],warnings:[`质量检查失败: ${t instanceof Error?t.message:String(t)}`]}}}n.d(t,{checkContentQuality:()=>s})}};