(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7585],{5464:function(e,r,a){Promise.resolve().then(a.bind(a,2692))},2692:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return n}});var t=a(7437),s=a(2265),d=a(1055);function n(){let[e,r]=(0,s.useState)(null),[a,n]=(0,s.useState)(null),[l,i]=(0,s.useState)(!1),c=async()=>{i(!0);try{let e=await fetch("/api/debug/test-db-connection"),a=await e.json();r(a)}catch(e){r({success:!1,error:e instanceof Error?e.message:String(e)})}finally{i(!1)}},o=async()=>{i(!0);try{let e=await fetch("/api/debug/test-use-cases-api"),r=await e.json();n(r)}catch(e){n({success:!1,error:e instanceof Error?e.message:String(e)})}finally{i(!1)}};return(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"管理员后台诊断工具"}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{children:(0,t.jsx)(d.ll,{children:"数据库连接测试"})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsx)(d.zx,{onClick:c,disabled:l,children:l?"测试中...":"测试数据库连接"}),e&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:(0,t.jsx)("pre",{className:"text-xs overflow-auto",children:JSON.stringify(e,null,2)})})]})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{children:(0,t.jsx)(d.ll,{children:"使用场景 API 测试"})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsx)(d.zx,{onClick:o,disabled:l,children:l?"测试中...":"测试使用场景 API"}),a&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:(0,t.jsx)("pre",{className:"text-xs overflow-auto",children:JSON.stringify(a,null,2)})})]})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{children:(0,t.jsx)(d.ll,{children:"常见问题排查"})}),(0,t.jsxs)(d.aY,{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"1. 检查浏览器控制台"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"按 F12 打开开发者工具，查看 Console 标签页是否有错误信息"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"2. 检查网络请求"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"在开发者工具的 Network 标签页中，查看 API 请求是否成功（状态码 200）"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"3. 检查环境变量"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"确保 .env.local 文件中配置了正确的 Supabase URL 和 Service Role Key"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"4. 检查数据库迁移"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["确保已运行数据库迁移：",(0,t.jsx)("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 rounded",children:"supabase db push"})]})]})]})]})]})}},5225:function(e,r,a){"use strict";var t=a(7437),s=a(2265),d=a(4508);let n=s.forwardRef((e,r)=>{let{className:a,variant:s="info",title:n,children:l,...i}=e;return(0,t.jsxs)("div",{ref:r,role:"alert",className:(0,d.cn)("rounded-lg p-4 text-sm",{success:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-400",error:"bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-400",warning:"bg-yellow-50 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",info:"bg-energy-water-surface text-energy-water dark:bg-energy-water-muted dark:text-energy-soft"}[s],a),...i,children:[n&&(0,t.jsx)("p",{className:"font-semibold mb-1",children:n}),(0,t.jsx)("div",{children:l})]})});n.displayName="Alert",r.Z=n},9379:function(e,r,a){"use strict";var t=a(7437),s=a(2265),d=a(4508);let n=s.forwardRef((e,r)=>{let{className:a,variant:s="default",children:n,...l}=e;return(0,t.jsx)("span",{ref:r,className:(0,d.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{success:"text-green-600 bg-green-50 dark:text-green-400 dark:bg-green-900/20",error:"text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/20",warning:"text-yellow-600 bg-yellow-50 dark:text-yellow-400 dark:bg-yellow-900/20",info:"text-energy-water bg-energy-water-surface dark:text-energy-soft dark:bg-energy-water-muted",default:"text-gray-600 bg-gray-50 dark:text-gray-400 dark:bg-gray-800",secondary:"text-energy-deep bg-energy-water-surface ring-1 ring-energy-gold-outline dark:text-white dark:bg-gray-800 dark:ring-gray-600"}[s],a),...l,children:n})});n.displayName="Badge",r.Z=n},4226:function(e,r,a){"use strict";var t=a(7437),s=a(2265),d=a(4508);let n={primary:"bg-gradient-to-r from-[#1f75ff] via-[#3f8cff] to-[#6fd6ff] text-white shadow-[0_18px_45px_-18px_rgba(33,122,255,0.75)] hover:brightness-110 active:translate-y-[1px]",secondary:"bg-gradient-to-r from-[#151a2b] via-[#1f2741] to-[#2a3c5f] text-white border border-white/15 shadow-[0_18px_35px_-22px_rgba(4,12,32,0.8)] hover:border-white/40 hover:bg-white/10 active:translate-y-[1px]",danger:"bg-red-600 text-white hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",ghost:"text-energy-deep hover:bg-energy-water-surface dark:text-gray-300 dark:hover:bg-gray-800",outline:"border border-gray-300 text-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700"},l={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},i=s.forwardRef((e,r)=>{let{className:a,variant:s="primary",size:i="md",isLoading:c,disabled:o,children:g,...x}=e;return(0,t.jsx)("button",{ref:r,className:(0,d.cn)("inline-flex items-center justify-center rounded-lg font-semibold transition-all duration-200 focus-ring disabled:opacity-50 disabled:cursor-not-allowed",n[s],l[i],a),disabled:o||c,...x,children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{children:"Loading..."})]}):g})});i.displayName="Button",r.Z=i},9178:function(e,r,a){"use strict";a.d(r,{Ol:function(){return l},Zb:function(){return n},aY:function(){return c},ll:function(){return i}});var t=a(7437),s=a(2265),d=a(4508);let n=s.forwardRef((e,r)=>{let{className:a,variant:s="default",children:n,...l}=e;return(0,t.jsx)("div",{ref:r,className:(0,d.cn)({default:"rounded-lg bg-white p-6 shadow-lg dark:bg-gray-800",bordered:"rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-700 dark:bg-gray-800",elevated:"rounded-lg bg-white p-6 shadow-xl dark:bg-gray-800"}[s],a),...l,children:n})});n.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:a,children:s,...n}=e;return(0,t.jsx)("div",{ref:r,className:(0,d.cn)("mb-4",a),...n,children:s})});l.displayName="CardHeader";let i=s.forwardRef((e,r)=>{let{className:a,children:s,...n}=e;return(0,t.jsx)("h3",{ref:r,className:(0,d.cn)("text-xl font-semibold text-gray-900 dark:text-white",a),...n,children:s})});i.displayName="CardTitle";let c=s.forwardRef((e,r)=>{let{className:a,children:s,...n}=e;return(0,t.jsx)("div",{ref:r,className:(0,d.cn)("",a),...n,children:s})});c.displayName="CardContent"},8068:function(e,r,a){"use strict";var t=a(7437),s=a(2265),d=a(4508);let n=s.forwardRef((e,r)=>{let{className:a,label:n,error:l,helperText:i,id:c,...o}=e,g=s.useId(),x=null!=c?c:g;return(0,t.jsxs)("div",{className:"w-full",children:[n&&(0,t.jsxs)("label",{htmlFor:x,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[n,o.required&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,t.jsx)("input",{ref:r,id:x,className:(0,d.cn)("w-full rounded-md border px-3 py-2 text-gray-900 shadow-sm transition-colors","focus:border-energy-water focus:outline-none focus:ring-energy-water","dark:border-gray-600 dark:bg-gray-700 dark:text-white","disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed","dark:disabled:bg-gray-800 dark:disabled:text-gray-400",l?"border-red-300 focus:border-red-500 focus:ring-red-500 dark:border-red-600":"border-gray-300 dark:border-gray-600",a),"aria-invalid":l?"true":"false","aria-describedby":l?"".concat(x,"-error"):i?"".concat(x,"-helper"):void 0,...o}),l&&(0,t.jsx)("p",{id:"".concat(x,"-error"),className:"mt-1 text-sm text-red-600 dark:text-red-400",role:"alert",children:l}),i&&!l&&(0,t.jsx)("p",{id:"".concat(x,"-helper"),className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:i})]})});n.displayName="Input",r.Z=n},4351:function(e,r,a){"use strict";var t=a(7437),s=a(2265),d=a(4508);let n=s.forwardRef((e,r)=>{let{className:a,label:s,error:n,helperText:l,id:i,...c}=e,o=i||"textarea-".concat(Math.random().toString(36).substr(2,9));return(0,t.jsxs)("div",{className:"w-full",children:[s&&(0,t.jsxs)("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s,c.required&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,t.jsx)("textarea",{ref:r,id:o,className:(0,d.cn)("w-full rounded-md border px-3 py-2 text-gray-900 shadow-sm transition-colors","focus:border-energy-water focus:outline-none focus:ring-energy-water","dark:border-gray-600 dark:bg-gray-700 dark:text-white","disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed","dark:disabled:bg-gray-800 dark:disabled:text-gray-400",n?"border-red-300 focus:border-red-500 focus:ring-red-500 dark:border-red-600":"border-gray-300 dark:border-gray-600",a),"aria-invalid":n?"true":"false","aria-describedby":n?"".concat(o,"-error"):l?"".concat(o,"-helper"):void 0,...c}),n&&(0,t.jsx)("p",{id:"".concat(o,"-error"),className:"mt-1 text-sm text-red-600 dark:text-red-400",role:"alert",children:n}),l&&!n&&(0,t.jsx)("p",{id:"".concat(o,"-helper"),className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:l})]})});n.displayName="Textarea",r.Z=n},1055:function(e,r,a){"use strict";a.d(r,{bZ:function(){return i.Z},Ct:function(){return l.Z},zx:function(){return t.Z},Zb:function(){return s.Zb},aY:function(){return s.aY},Ol:function(){return s.Ol},ll:function(){return s.ll},II:function(){return d.Z},gx:function(){return n.Z}});var t=a(4226),s=a(9178),d=a(8068),n=a(4351),l=a(9379),i=a(5225),c=a(7437),o=a(2265),g=a(4508);o.forwardRef((e,r)=>{let{className:a,value:t,max:s=100,showLabel:d=!1,size:n="md",variant:l="default",...i}=e,o=Math.min(Math.max(t/s*100,0),100),x={sm:"h-2",md:"h-3",lg:"h-4"};return(0,c.jsxs)("div",{ref:r,className:(0,g.cn)("w-full",a),...i,children:[d&&(0,c.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[(0,c.jsx)("span",{children:"Progress"}),(0,c.jsxs)("span",{children:[Math.round(o),"%"]})]}),(0,c.jsx)("div",{className:(0,g.cn)("w-full rounded-full bg-gray-200 dark:bg-gray-700",x[n]),children:(0,c.jsx)("div",{className:(0,g.cn)("rounded-full transition-all duration-300",x[n],{default:"bg-energy-water",success:"bg-green-600",warning:"bg-yellow-600",error:"bg-red-600"}[l]),style:{width:"".concat(o,"%")},role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":s})})]})}).displayName="Progress"},4508:function(e,r,a){"use strict";a.d(r,{cn:function(){return d}});var t=a(1994),s=a(3335);function d(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.m6)((0,t.W)(r))}}},function(e){e.O(0,[6137,2971,2117,1744],function(){return e(e.s=5464)}),_N_E=e.O()}]);