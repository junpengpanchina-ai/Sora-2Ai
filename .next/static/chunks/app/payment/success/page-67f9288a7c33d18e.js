(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7478],{6543:function(e,r,t){Promise.resolve().then(t.bind(t,3515))},3515:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var a=t(7437),s=t(2265),n=t(9376),d=t(7648),l=t(1055),c=t(3426);function i(){let e=(0,n.useSearchParams)(),r=e.get("session_id"),t=e.get("recharge_id"),[i,o]=(0,s.useState)("checking"),[u,g]=(0,s.useState)(null),[m,x]=(0,s.useState)(null),[f,h]=(0,s.useState)(null),[y,b]=(0,s.useState)(0),p=(0,c.r4)()||"/video",k=(0,s.useCallback)(async()=>{if(r)try{var e,t,a;let s=await fetch("/api/payment/check-session?session_id=".concat(r)),n=await s.json();if(!s.ok){o("error"),h(n.error||"Failed to check payment status");return}if(!n.success){o("failed"),h(n.message||"Payment not completed");return}x({amount:null===(e=n.recharge_record)||void 0===e?void 0:e.amount,credits:null===(t=n.recharge_record)||void 0===t?void 0:t.credits,status:null===(a=n.recharge_record)||void 0===a?void 0:a.status}),g(n.user_credits),"completed"===n.recharge_status?o("completed"):"pending"===n.recharge_status?o("processing"):(o("error"),h("Recharge status abnormal"))}catch(e){console.error("Failed to check payment status:",e),o("error"),h("Error occurred while checking payment status")}},[r]),w=(0,s.useCallback)(async()=>{if(t)try{let s=await fetch("/api/payment/check-recharge?recharge_id=".concat(t)),n=await s.json();if(!s.ok){o("error"),h(n.error||"Failed to check recharge status");return}if(n.success){var e,r,a;x({amount:null===(e=n.recharge_record)||void 0===e?void 0:e.amount,credits:null===(r=n.recharge_record)||void 0===r?void 0:r.credits,status:null===(a=n.recharge_record)||void 0===a?void 0:a.status}),g(n.user_credits),"completed"===n.recharge_status?o("completed"):"pending"===n.recharge_status?o("processing"):(o("error"),h("Recharge status abnormal"))}}catch(e){console.error("Failed to check recharge status:",e),o("error"),h("Error occurred while checking recharge status")}},[t]);return(0,s.useEffect)(()=>{if(!r&&!t){o("error"),h("Missing payment information");return}if(t&&!r){w();return}r&&k()},[r,t,k,w]),(0,s.useEffect)(()=>{"completed"===i&&null!==u&&window.dispatchEvent(new CustomEvent("creditsUpdated",{detail:{credits:u}}))},[i,u]),(0,s.useEffect)(()=>{if("processing"!==i)return;if(y>=30){o("completed"),h("Payment successful, but credits may be delayed. Please refresh the page later.");return}let e=setTimeout(()=>{t&&!r?w():r&&k(),b(e=>e+1)},2e3);return()=>clearTimeout(e)},[i,y,r,t,k,w]),(0,a.jsx)("div",{className:"min-h-screen bg-energy-hero dark:bg-energy-hero-dark flex items-center justify-center p-4",children:(0,a.jsxs)(l.Zb,{className:"w-full max-w-md",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"text-center text-2xl",children:["completed"===i&&(0,a.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"✓"}),"processing"===i&&(0,a.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400 animate-pulse",children:"⏳"}),"checking"===i&&(0,a.jsx)("span",{className:"text-blue-600 dark:text-blue-400 animate-pulse",children:"⏳"}),"failed"===i&&(0,a.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"✗"}),"error"===i&&(0,a.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"⚠"})," ","completed"===i&&"Payment Successful","processing"===i&&"Processing...","checking"===i&&"Verifying...","failed"===i&&"Payment Failed","error"===i&&"Error Occurred"]})}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:["completed"===i&&(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Your recharge has been successfully processed, credits have been added to your account."}),"processing"===i&&(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Payment confirmed, processing credits, please wait..."}),"checking"===i&&(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Verifying payment status..."}),("failed"===i||"error"===i)&&f&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/30 rounded-lg border border-red-200 dark:border-red-800",children:(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:f})}),m&&(0,a.jsxs)("div",{className:"mb-4 rounded-lg bg-energy-water-surface p-4 dark:bg-energy-water-muted/30",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Recharge Information"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-energy-water dark:text-energy-soft",children:["$",m.amount," → ",m.credits," Credits"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Status: ","completed"===m.status?"Completed":"pending"===m.status?"Processing":m.status||"Unknown"]})]}),null!==u&&(0,a.jsxs)("div",{className:"mb-4 rounded-lg bg-energy-water-surface p-4 dark:bg-energy-water-muted/30",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Current Credits Balance"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-energy-water dark:text-energy-soft",children:[u," Credits"]})]}),r&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mb-4",children:["Order ID: ",r.substring(0,20),"..."]}),"processing"===i&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-energy-water"}),(0,a.jsxs)("span",{children:["Waiting for credits... (",y,"/30)"]})]})})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[("error"===i||"processing"===i)&&(0,a.jsx)(l.zx,{variant:"primary",className:"flex-1",onClick:()=>{b(0),o("checking"),h(null),t&&!r?w():r&&k()},children:"Refresh Status"}),(0,a.jsx)(d.default,{href:"/",className:"flex-1",children:(0,a.jsx)(l.zx,{variant:"primary",className:"w-full",children:"Back to Home"})}),"completed"===i&&(0,a.jsx)(d.default,{href:p,className:"flex-1",children:(0,a.jsx)(l.zx,{variant:"secondary",className:"w-full",children:"Generate Video"})})]})]})]})})}},5225:function(e,r,t){"use strict";var a=t(7437),s=t(2265),n=t(4508);let d=s.forwardRef((e,r)=>{let{className:t,variant:s="info",title:d,children:l,...c}=e;return(0,a.jsxs)("div",{ref:r,role:"alert",className:(0,n.cn)("rounded-lg p-4 text-sm",{success:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-400",error:"bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-400",warning:"bg-yellow-50 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",info:"bg-energy-water-surface text-energy-water dark:bg-energy-water-muted dark:text-energy-soft"}[s],t),...c,children:[d&&(0,a.jsx)("p",{className:"font-semibold mb-1",children:d}),(0,a.jsx)("div",{children:l})]})});d.displayName="Alert",r.Z=d},9379:function(e,r,t){"use strict";var a=t(7437),s=t(2265),n=t(4508);let d=s.forwardRef((e,r)=>{let{className:t,variant:s="default",children:d,...l}=e;return(0,a.jsx)("span",{ref:r,className:(0,n.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{success:"text-green-600 bg-green-50 dark:text-green-400 dark:bg-green-900/20",error:"text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/20",warning:"text-yellow-600 bg-yellow-50 dark:text-yellow-400 dark:bg-yellow-900/20",info:"text-energy-water bg-energy-water-surface dark:text-energy-soft dark:bg-energy-water-muted",default:"text-gray-600 bg-gray-50 dark:text-gray-400 dark:bg-gray-800",secondary:"text-energy-deep bg-energy-water-surface ring-1 ring-energy-gold-outline dark:text-white dark:bg-gray-800 dark:ring-gray-600"}[s],t),...l,children:d})});d.displayName="Badge",r.Z=d},4226:function(e,r,t){"use strict";var a=t(7437),s=t(2265),n=t(4508);let d={primary:"bg-gradient-to-r from-[#1f75ff] via-[#3f8cff] to-[#6fd6ff] text-white shadow-[0_18px_45px_-18px_rgba(33,122,255,0.75)] hover:brightness-110 active:translate-y-[1px]",secondary:"bg-gradient-to-r from-[#151a2b] via-[#1f2741] to-[#2a3c5f] text-white border border-white/15 shadow-[0_18px_35px_-22px_rgba(4,12,32,0.8)] hover:border-white/40 hover:bg-white/10 active:translate-y-[1px]",danger:"bg-red-600 text-white hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",ghost:"text-energy-deep hover:bg-energy-water-surface dark:text-gray-300 dark:hover:bg-gray-800",outline:"border border-gray-300 text-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700"},l={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},c=s.forwardRef((e,r)=>{let{className:t,variant:s="primary",size:c="md",isLoading:i,disabled:o,children:u,...g}=e;return(0,a.jsx)("button",{ref:r,className:(0,n.cn)("inline-flex items-center justify-center rounded-lg font-semibold transition-all duration-200 focus-ring disabled:opacity-50 disabled:cursor-not-allowed",d[s],l[c],t),disabled:o||i,...g,children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{children:"Loading..."})]}):u})});c.displayName="Button",r.Z=c},9178:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},Zb:function(){return d},aY:function(){return i},ll:function(){return c}});var a=t(7437),s=t(2265),n=t(4508);let d=s.forwardRef((e,r)=>{let{className:t,variant:s="default",children:d,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)({default:"rounded-lg bg-white p-6 shadow-lg dark:bg-gray-800",bordered:"rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-700 dark:bg-gray-800",elevated:"rounded-lg bg-white p-6 shadow-xl dark:bg-gray-800"}[s],t),...l,children:d})});d.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:t,children:s,...d}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("mb-4",t),...d,children:s})});l.displayName="CardHeader";let c=s.forwardRef((e,r)=>{let{className:t,children:s,...d}=e;return(0,a.jsx)("h3",{ref:r,className:(0,n.cn)("text-xl font-semibold text-gray-900 dark:text-white",t),...d,children:s})});c.displayName="CardTitle";let i=s.forwardRef((e,r)=>{let{className:t,children:s,...d}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("",t),...d,children:s})});i.displayName="CardContent"},8068:function(e,r,t){"use strict";var a=t(7437),s=t(2265),n=t(4508);let d=s.forwardRef((e,r)=>{let{className:t,label:d,error:l,helperText:c,id:i,...o}=e,u=s.useId(),g=null!=i?i:u;return(0,a.jsxs)("div",{className:"w-full",children:[d&&(0,a.jsxs)("label",{htmlFor:g,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[d,o.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsx)("input",{ref:r,id:g,className:(0,n.cn)("w-full rounded-md border px-3 py-2 text-gray-900 shadow-sm transition-colors","focus:border-energy-water focus:outline-none focus:ring-energy-water","dark:border-gray-600 dark:bg-gray-700 dark:text-white","disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed","dark:disabled:bg-gray-800 dark:disabled:text-gray-400",l?"border-red-300 focus:border-red-500 focus:ring-red-500 dark:border-red-600":"border-gray-300 dark:border-gray-600",t),"aria-invalid":l?"true":"false","aria-describedby":l?"".concat(g,"-error"):c?"".concat(g,"-helper"):void 0,...o}),l&&(0,a.jsx)("p",{id:"".concat(g,"-error"),className:"mt-1 text-sm text-red-600 dark:text-red-400",role:"alert",children:l}),c&&!l&&(0,a.jsx)("p",{id:"".concat(g,"-helper"),className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:c})]})});d.displayName="Input",r.Z=d},4351:function(e,r,t){"use strict";var a=t(7437),s=t(2265),n=t(4508);let d=s.forwardRef((e,r)=>{let{className:t,label:s,error:d,helperText:l,id:c,...i}=e,o=c||"textarea-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("div",{className:"w-full",children:[s&&(0,a.jsxs)("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s,i.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsx)("textarea",{ref:r,id:o,className:(0,n.cn)("w-full rounded-md border px-3 py-2 text-gray-900 shadow-sm transition-colors","focus:border-energy-water focus:outline-none focus:ring-energy-water","dark:border-gray-600 dark:bg-gray-700 dark:text-white","disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed","dark:disabled:bg-gray-800 dark:disabled:text-gray-400",d?"border-red-300 focus:border-red-500 focus:ring-red-500 dark:border-red-600":"border-gray-300 dark:border-gray-600",t),"aria-invalid":d?"true":"false","aria-describedby":d?"".concat(o,"-error"):l?"".concat(o,"-helper"):void 0,...i}),d&&(0,a.jsx)("p",{id:"".concat(o,"-error"),className:"mt-1 text-sm text-red-600 dark:text-red-400",role:"alert",children:d}),l&&!d&&(0,a.jsx)("p",{id:"".concat(o,"-helper"),className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:l})]})});d.displayName="Textarea",r.Z=d},1055:function(e,r,t){"use strict";t.d(r,{bZ:function(){return c.Z},Ct:function(){return l.Z},zx:function(){return a.Z},Zb:function(){return s.Zb},aY:function(){return s.aY},Ol:function(){return s.Ol},ll:function(){return s.ll},II:function(){return n.Z},gx:function(){return d.Z}});var a=t(4226),s=t(9178),n=t(8068),d=t(4351),l=t(9379),c=t(5225),i=t(7437),o=t(2265),u=t(4508);o.forwardRef((e,r)=>{let{className:t,value:a,max:s=100,showLabel:n=!1,size:d="md",variant:l="default",...c}=e,o=Math.min(Math.max(a/s*100,0),100),g={sm:"h-2",md:"h-3",lg:"h-4"};return(0,i.jsxs)("div",{ref:r,className:(0,u.cn)("w-full",t),...c,children:[n&&(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[(0,i.jsx)("span",{children:"Progress"}),(0,i.jsxs)("span",{children:[Math.round(o),"%"]})]}),(0,i.jsx)("div",{className:(0,u.cn)("w-full rounded-full bg-gray-200 dark:bg-gray-700",g[d]),children:(0,i.jsx)("div",{className:(0,u.cn)("rounded-full transition-all duration-300",g[d],{default:"bg-energy-water",success:"bg-green-600",warning:"bg-yellow-600",error:"bg-red-600"}[l]),style:{width:"".concat(o,"%")},role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":s})})]})}).displayName="Progress"},3426:function(e,r,t){"use strict";t.d(r,{Ko:function(){return n},TW:function(){return l},r4:function(){return d}});let a="s2ai_post_login_redirect";function s(e){if(!e)return null;let r=String(e).trim();return!r||!r.startsWith("/")||r.startsWith("//")||r.includes("://")||r.startsWith("/auth/callback")||r.startsWith("/login")?null:r}function n(e){let r=s(e);if(r){try{"undefined"!=typeof sessionStorage&&sessionStorage.setItem(a,r)}catch(e){}try{"undefined"!=typeof localStorage&&localStorage.setItem(a,r)}catch(e){}}}function d(){let e=null;try{"undefined"!=typeof sessionStorage&&(e=sessionStorage.getItem(a))}catch(e){}if(!e)try{"undefined"!=typeof localStorage&&(e=localStorage.getItem(a))}catch(e){}return s(e)}function l(){try{"undefined"!=typeof sessionStorage&&sessionStorage.removeItem(a)}catch(e){}try{"undefined"!=typeof localStorage&&localStorage.removeItem(a)}catch(e){}}},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return n}});var a=t(1994),s=t(3335);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,a.W)(r))}},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return s.a}});var a=t(2972),s=t.n(a)},9376:function(e,r,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[2972,6137,2971,2117,1744],function(){return e(e.s=6543)}),_N_E=e.O()}]);