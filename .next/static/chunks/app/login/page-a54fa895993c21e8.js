(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626,970],{539:function(e,t,s){Promise.resolve().then(s.bind(s,804)),Promise.resolve().then(s.bind(s,533)),Promise.resolve().then(s.bind(s,8971)),Promise.resolve().then(s.bind(s,6242)),Promise.resolve().then(s.t.bind(s,2972,23)),Promise.resolve().then(s.bind(s,1523)),Promise.resolve().then(s.bind(s,49))},804:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var n=s(7437),i=s(970),o=s(3426),r=s(2265);function l(e){let{className:t=""}=e,[s,l]=(0,r.useState)(""),[a,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),h=async e=>{if(e.preventDefault(),!a&&s.trim())try{c(!0),g(null);let e=(0,i.createClient)();try{let e=new URLSearchParams(window.location.search).get("redirect"),t="/login"===window.location.pathname,s="".concat(window.location.pathname).concat(window.location.search);(0,o.Ko)(e||(t?"/":s)||"/")}catch(e){}let t="".concat(window.location.origin,"/auth/callback"),{error:n}=await e.auth.signInWithOtp({email:s.trim(),options:{emailRedirectTo:t,shouldCreateUser:!0}});if(n){console.error("Magic link error:",n),g(n.message||"Failed to send magic link. Please try again."),c(!1);return}u(!0),c(!1)}catch(e){console.error("Email login error:",e),g(e instanceof Error?e.message:"An unexpected error occurred"),c(!1)}};return d?(0,n.jsx)("div",{className:"space-y-4 ".concat(t),children:(0,n.jsxs)("div",{className:"rounded-xl border border-green-500/40 bg-green-500/10 p-4 text-sm text-green-100",children:[(0,n.jsx)("p",{className:"font-semibold mb-2",children:"✓ Check your email"}),(0,n.jsxs)("p",{children:["We've sent a magic link to ",(0,n.jsx)("strong",{children:s}),". Click the link in the email to sign in."]}),(0,n.jsxs)("p",{className:"mt-2 text-xs opacity-90",children:["Didn't receive it? Check your spam folder or"," ",(0,n.jsx)("button",{onClick:()=>{u(!1),l(""),g(null)},className:"underline font-semibold",children:"try again"})]})]})}):(0,n.jsxs)("form",{onSubmit:h,className:"space-y-4 ".concat(t),children:[m&&(0,n.jsx)("div",{className:"rounded-xl border border-red-500/40 bg-red-500/10 p-3 text-sm text-red-100",children:m}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,n.jsx)("input",{id:"email",type:"email",value:s,onChange:e=>l(e.target.value),placeholder:"Enter your email",required:!0,disabled:a,className:"w-full rounded-xl bg-white/10 px-4 py-3 text-white placeholder-white/60 backdrop-blur-sm border border-white/20 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"})]}),(0,n.jsx)("button",{type:"submit",disabled:a||!s.trim(),className:"w-full rounded-xl bg-white px-6 py-3 text-base font-semibold text-gray-900 shadow-lg ring-1 ring-gray-200 transition-all duration-200 hover:bg-gray-50 hover:shadow-xl hover:-translate-y-0.5 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 disabled:hover:shadow-lg dark:bg-gray-700 dark:text-white dark:ring-gray-600 dark:hover:bg-gray-600",children:a?(0,n.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,n.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending magic link..."]}):"Send magic link"}),(0,n.jsx)("p",{className:"text-xs text-center text-white/60",children:"We'll send you a secure link to sign in. No password needed."})]})}},533:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var n=s(7437),i=s(2265),o=s(970);function r(){let[e,t]=(0,i.useState)(null),[s,r]=(0,i.useState)(!1);(0,i.useEffect)(()=>{"1"===new URLSearchParams(window.location.search).get("debug")&&(r(!0),l())},[]);let l=async()=>{try{var e,s;let n=(0,o.createClient)(),{data:{session:i}}=await n.auth.getSession(),r={origin:window.location.origin,supabaseUrl:"https://hgzpzsiafycwlqrkzbis.supabase.co",detectSessionInUrl:!0,hasSession:!!i,sessionUserId:(null==i?void 0:null===(e=i.user)||void 0===e?void 0:e.id)||null,sessionEmail:(null==i?void 0:null===(s=i.user)||void 0===s?void 0:s.email)||null,timestamp:new Date().toISOString()};t(r)}catch(e){console.error("Failed to load debug info:",e),t({origin:window.location.origin,supabaseUrl:"https://hgzpzsiafycwlqrkzbis.supabase.co",detectSessionInUrl:!0,hasSession:!1,sessionUserId:null,sessionEmail:null,timestamp:new Date().toISOString()})}};return s&&e?(0,n.jsxs)("div",{className:"mt-6 rounded-xl border border-yellow-500/40 bg-yellow-500/10 p-4 text-xs",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,n.jsx)("strong",{className:"font-semibold text-yellow-100",children:"\uD83D\uDD0D Debug Info"}),(0,n.jsx)("button",{onClick:l,className:"rounded px-2 py-1 text-yellow-200 hover:bg-yellow-500/20",children:"Refresh"})]}),(0,n.jsxs)("div",{className:"space-y-2 font-mono text-yellow-100/90",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-yellow-200/70",children:"Origin:"})," ",(0,n.jsx)("span",{className:"text-yellow-100",children:e.origin})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-yellow-200/70",children:"Supabase URL:"})," ",(0,n.jsx)("span",{className:"text-yellow-100",children:(e=>{if(!e||"not configured"===e)return e;try{let t=new URL(e);return"".concat(t.protocol,"//").concat(t.hostname)}catch(t){return e.substring(0,30)+"..."}})(e.supabaseUrl)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-yellow-200/70",children:"detectSessionInUrl:"})," ",(0,n.jsx)("span",{className:e.detectSessionInUrl?"text-green-300":"text-red-300",children:e.detectSessionInUrl?"✅ true":"❌ false"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-yellow-200/70",children:"Has Session:"})," ",(0,n.jsx)("span",{className:e.hasSession?"text-green-300":"text-red-300",children:e.hasSession?"✅ Yes":"❌ No"})]}),e.sessionUserId&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-yellow-200/70",children:"User ID:"})," ",(0,n.jsxs)("span",{className:"text-yellow-100",children:[e.sessionUserId.substring(0,20),"..."]})]}),e.sessionEmail&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-yellow-200/70",children:"Email:"})," ",(0,n.jsx)("span",{className:"text-yellow-100",children:e.sessionEmail})]}),(0,n.jsxs)("div",{className:"mt-2 pt-2 border-t border-yellow-500/30",children:[(0,n.jsx)("span",{className:"text-yellow-200/70",children:"Timestamp:"})," ",(0,n.jsx)("span",{className:"text-yellow-100",children:e.timestamp})]})]}),(0,n.jsxs)("div",{className:"mt-3 text-xs text-yellow-200/70",children:["\uD83D\uDCA1 ",(0,n.jsx)("strong",{children:"Tip:"})," Add ",(0,n.jsx)("code",{className:"bg-yellow-500/20 px-1 rounded",children:"?debug=1"})," to URL to show this panel"]})]}):null}},8971:function(e,t,s){"use strict";s.d(t,{default:function(){return o}});var n=s(7437),i=s(2265);function o(){let[e,t]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e=setTimeout(()=>{t(!0)},100);return()=>clearTimeout(e)},[]),e)?(0,n.jsx)("div",{className:"pointer-events-none absolute inset-0","aria-hidden":"true",children:(0,n.jsxs)("div",{className:"login-visual login-visual--canvas",children:[(0,n.jsx)("div",{className:"login-visual__grid"}),(0,n.jsx)("div",{className:"login-visual__glow"}),(0,n.jsx)("div",{className:"login-visual__orb"}),(0,n.jsx)("div",{className:"login-visual__orb login-visual__orb--small"}),(0,n.jsx)("div",{className:"login-visual__ring"}),(0,n.jsx)("div",{className:"login-visual__ring login-visual__ring--delay"}),(0,n.jsx)("div",{className:"login-visual__wave"}),(0,n.jsx)("span",{className:"login-visual__spark login-visual__spark--one"}),(0,n.jsx)("span",{className:"login-visual__spark login-visual__spark--two"}),(0,n.jsx)("span",{className:"login-visual__spark login-visual__spark--three"})]})}):(0,n.jsx)("div",{className:"pointer-events-none absolute inset-0","aria-hidden":"true",children:(0,n.jsx)("div",{className:"login-visual login-visual--canvas",children:(0,n.jsx)("div",{className:"login-visual__grid"})})})}},6242:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var n=s(2265);function i(e){let{error:t,pathname:s}=e;return(0,n.useEffect)(()=>{if(!t)return;let e=t.match(/^([^:]+):\s*(.+)$/),n=e?e[1]:t,i=e?e[2]:null,o=null;t.includes("invalid_client")?o="invalid_client":t.includes("redirect_uri_mismatch")?o="redirect_uri_mismatch":t.includes("invalid_grant")?o="invalid_grant":t.includes("server_error")?o="server_error":t.includes("Unable to exchange external code")&&(o="exchange_failed"),(async()=>{try{await fetch("/api/log-oauth-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:n,error_description:i||t,error_code:o,origin:window.location.origin,pathname:s||window.location.pathname,user_agent:"undefined"!=typeof navigator?navigator.userAgent:null,timestamp:new Date().toISOString()})})}catch(e){console.error("[OAuth Error Logger] Failed to log error:",e)}})()},[t,s]),null}},3426:function(e,t,s){"use strict";s.d(t,{Ko:function(){return o},TW:function(){return l},r4:function(){return r}});let n="s2ai_post_login_redirect";function i(e){if(!e)return null;let t=String(e).trim();return!t||!t.startsWith("/")||t.startsWith("//")||t.includes("://")||t.startsWith("/auth/callback")||t.startsWith("/login")?null:t}function o(e){let t=i(e);if(t){try{"undefined"!=typeof sessionStorage&&sessionStorage.setItem(n,t)}catch(e){}try{"undefined"!=typeof localStorage&&localStorage.setItem(n,t)}catch(e){}}}function r(){let e=null;try{"undefined"!=typeof sessionStorage&&(e=sessionStorage.getItem(n))}catch(e){}if(!e)try{"undefined"!=typeof localStorage&&(e=localStorage.getItem(n))}catch(e){}return i(e)}function l(){try{"undefined"!=typeof sessionStorage&&sessionStorage.removeItem(n)}catch(e){}try{"undefined"!=typeof localStorage&&localStorage.removeItem(n)}catch(e){}}},970:function(e,t,s){"use strict";let n,i;s.d(t,{createClient:function(){return l}});var o=s(3053);let r=new Map;function l(){let e="https://hgzpzsiafycwlqrkzbis.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhnenB6c2lhZnljd2xxcmt6YmlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2MTk4NzIsImV4cCI6MjA3ODE5NTg3Mn0.WdpkrSXVZVZ64bY8NXG6Bpf-w59i305F7agny6wuj_Q";if(!e||!t)throw Error("Missing Supabase environment variables");return i||(i=function(){let e=function(){try{return"localStorage"in window?window.localStorage:null}catch(e){return null}}(),t=function(){try{return"sessionStorage"in window?window.sessionStorage:null}catch(e){return null}}();return{async getItem(s){var n;s.endsWith("-code-verifier")&&console.log("[SupabaseStorage] getItem start",{key:s});let i=null==e?void 0:e.getItem(s);if(null!=i)return r.set(s,i),s.endsWith("-code-verifier")&&console.log("[SupabaseStorage] getItem hit localStorage",{key:s}),i;let o=null==t?void 0:t.getItem(s);if(null!=o)return r.set(s,o),s.endsWith("-code-verifier")&&console.log("[SupabaseStorage] getItem hit sessionStorage",{key:s}),o;let l=function(e){if("undefined"==typeof document)return null;for(let t of document.cookie?document.cookie.split("; "):[]){let[s,...n]=t.split("=");if(s===e)return decodeURIComponent(n.join("="))}return null}(s);return null!==l?(r.set(s,l),s.endsWith("-code-verifier")&&console.log("[SupabaseStorage] getItem hit cookie",{key:s}),l):(s.endsWith("-code-verifier")&&console.log("[SupabaseStorage] getItem miss",{key:s}),null!==(n=r.get(s))&&void 0!==n?n:null)},async setItem(s,n){let i=String(n);try{null==e||e.setItem(s,i),s.endsWith("-code-verifier")&&console.log("[SupabaseStorage] setItem localStorage success",{key:s})}catch(e){s.endsWith("-code-verifier")&&console.warn("[SupabaseStorage] setItem localStorage failed",{key:s,error:e})}try{null==t||t.setItem(s,i),s.endsWith("-code-verifier")&&console.log("[SupabaseStorage] setItem sessionStorage success",{key:s})}catch(e){s.endsWith("-code-verifier")&&console.warn("[SupabaseStorage] setItem sessionStorage failed",{key:s,error:e})}if(s.endsWith("-code-verifier"))try{(function(e,t,s){if("undefined"==typeof document)return;let n="https:"===window.location.protocol,i="".concat(e,"=").concat(encodeURIComponent(t),"; Path=/; SameSite=Lax; Max-Age=").concat(600).concat(n?"; Secure":"");document.cookie=i})(s,i,0),console.log("[SupabaseStorage] setItem cookie success",{key:s})}catch(e){console.warn("[SupabaseStorage] setItem cookie failed",{key:s,error:e})}r.set(s,i),s.endsWith("-code-verifier")&&console.log("[SupabaseStorage] setItem memory store",{key:s})},async removeItem(s){try{null==e||e.removeItem(s),s.endsWith("-code-verifier")&&console.log("[SupabaseStorage] removeItem localStorage",{key:s})}catch(e){s.endsWith("-code-verifier")&&console.warn("[SupabaseStorage] removeItem localStorage failed",{key:s,error:e})}try{null==t||t.removeItem(s),s.endsWith("-code-verifier")&&console.log("[SupabaseStorage] removeItem sessionStorage",{key:s})}catch(e){s.endsWith("-code-verifier")&&console.warn("[SupabaseStorage] removeItem sessionStorage failed",{key:s,error:e})}s.endsWith("-code-verifier")&&("undefined"!=typeof document&&(document.cookie="".concat(s,"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Lax")),console.log("[SupabaseStorage] removeItem cookie",{key:s})),r.delete(s)}}}()),n||(n=(0,o.eI)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce",storage:i}})),n}},1523:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let n=s(8993);function i(e){let{reason:t,children:s}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return s}},49:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return o}});let n=s(7437),i=s(544);function o(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let s=(0,i.getExpectedRequestStore)("next/dynamic css"),o=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));o.push(...t)}}return 0===o.length?null:(0,n.jsx)(n.Fragment,{children:o.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[2972,4609,3053,2971,2117,1744],function(){return e(e.s=539)}),_N_E=e.O()}]);