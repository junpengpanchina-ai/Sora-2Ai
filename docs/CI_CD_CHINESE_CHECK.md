# CI/CD ä¸­æ–‡å†…å®¹æ£€æŸ¥é…ç½®

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•åœ¨ CI/CD å’Œä»£ç å®¡æŸ¥ä¸­é›†æˆä¸­æ–‡å†…å®¹æ£€æŸ¥ã€‚

## ğŸ“‹ æ¦‚è¿°

ä¸ºäº†é˜²æ­¢åœ¨è‹±æ–‡ç½‘ç«™ä¸­æ„å¤–å¼•å…¥ä¸­æ–‡å­—ç¬¦ï¼Œæˆ‘ä»¬è®¾ç½®äº†å¤šå±‚æ£€æŸ¥æœºåˆ¶ï¼š

1. **Pre-commit Hook** - æäº¤å‰æ£€æŸ¥
2. **GitHub Actions CI** - è‡ªåŠ¨æ£€æŸ¥ PR å’Œæ¨é€
3. **å®šæœŸæ£€æŸ¥è„šæœ¬** - æ‰‹åŠ¨è¿è¡Œå®Œæ•´æ£€æŸ¥

## ğŸ”§ é…ç½®è¯´æ˜

### 1. Pre-commit Hookï¼ˆæäº¤å‰æ£€æŸ¥ï¼‰

#### ä½¿ç”¨ Huskyï¼ˆæ¨èï¼‰

å¦‚æœé¡¹ç›®ä½¿ç”¨ Huskyï¼š

```bash
# å®‰è£… huskyï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
npm install --save-dev husky

# åˆå§‹åŒ– husky
npx husky install

# æ·»åŠ  pre-commit hook
npx husky add .husky/pre-commit "npm run check:chinese:changed"
```

#### ä½¿ç”¨ Git Hooksï¼ˆç›´æ¥æ–¹å¼ï¼‰

```bash
# è¿è¡Œè®¾ç½®è„šæœ¬
./scripts/setup-git-hooks.sh
```

è¿™ä¼šåœ¨ `.git/hooks/pre-commit` ä¸­åˆ›å»ºä¸€ä¸ªæ£€æŸ¥è„šæœ¬ã€‚

### 2. GitHub Actions CI

#### è‡ªåŠ¨æ£€æŸ¥ PR

æ¯æ¬¡åˆ›å»ºæˆ–æ›´æ–° PR æ—¶ï¼ŒGitHub Actions ä¼šè‡ªåŠ¨è¿è¡Œæ£€æŸ¥ï¼š

- **Workflow**: `.github/workflows/check-chinese.yml`
- **è§¦å‘æ¡ä»¶**: Pull Request åˆ° main æˆ– develop åˆ†æ”¯
- **æ£€æŸ¥èŒƒå›´**: åªæ£€æŸ¥å˜æ›´çš„æ–‡ä»¶

å¦‚æœå‘ç°é—®é¢˜ï¼Œä¼šåœ¨ PR ä¸­è‡ªåŠ¨æ·»åŠ è¯„è®ºã€‚

#### é›†æˆåˆ°ç°æœ‰ CI

ç°æœ‰çš„ CI workflow (`.github/workflows/ci.yml`) å·²ç»é›†æˆäº†ä¸­æ–‡æ£€æŸ¥ï¼š

```yaml
- name: Check for Chinese characters in changed files
  run: npm run check:chinese:changed
  continue-on-error: false
```

### 3. æ‰‹åŠ¨æ£€æŸ¥

#### æ£€æŸ¥å˜æ›´çš„æ–‡ä»¶

```bash
# æ£€æŸ¥å½“å‰åˆ†æ”¯ç›¸å¯¹äº main çš„å˜æ›´
npm run check:chinese:changed

# æ£€æŸ¥ç‰¹å®šåˆ†æ”¯çš„å˜æ›´
npm run check:chinese:changed -- --base=develop --head=feature-branch
```

#### æ£€æŸ¥æ•´ä¸ªä»£ç åº“

```bash
# å®Œæ•´æ£€æŸ¥ï¼ˆåŒ…æ‹¬æ‰€æœ‰æ–‡ä»¶ï¼‰
npm run check:chinese
```

## ğŸ“ å¯ç”¨è„šæœ¬

| è„šæœ¬ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|------|------|---------|
| `npm run check:chinese` | æ£€æŸ¥æ•´ä¸ªä»£ç åº“ | å®šæœŸå…¨é¢æ£€æŸ¥ |
| `npm run check:chinese:changed` | åªæ£€æŸ¥å˜æ›´çš„æ–‡ä»¶ | CI/CDã€Pre-commit |

## âš™ï¸ é…ç½®é€‰é¡¹

### æ’é™¤çš„æ–‡ä»¶/ç›®å½•

ä»¥ä¸‹æ–‡ä»¶/ç›®å½•ä¼šè¢«è‡ªåŠ¨æ’é™¤ï¼š

- `node_modules/`
- `.next/`
- `.git/`
- `dist/`
- `build/`
- `CONSOLE_*.js`ï¼ˆè°ƒè¯•è„šæœ¬ï¼‰
- `*DEBUG*.js`ï¼ˆè°ƒè¯•è„šæœ¬ï¼‰
- `*TEST*.js`ï¼ˆæµ‹è¯•è„šæœ¬ï¼‰
- `*DIAGNOSTIC*.js`ï¼ˆè¯Šæ–­è„šæœ¬ï¼‰
- `PASTE_TO_CONSOLE.js`ï¼ˆè°ƒè¯•è„šæœ¬ï¼‰

### å…è®¸åŒ…å«ä¸­æ–‡çš„æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶å…è®¸åŒ…å«ä¸­æ–‡ï¼ˆå†…éƒ¨æ–‡æ¡£ï¼‰ï¼š

- `*.md`ï¼ˆMarkdown æ–‡æ¡£ï¼‰
- `README.md`
- `CHANGELOG.md`
- `docs/**/*.md`
- `scripts/**/*.md`

## ğŸš¨ æ£€æŸ¥å¤±è´¥æ—¶çš„å¤„ç†

### Pre-commit Hook å¤±è´¥

å¦‚æœ pre-commit hook æ£€æŸ¥å¤±è´¥ï¼š

1. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼Œæ‰¾åˆ°åŒ…å«ä¸­æ–‡çš„æ–‡ä»¶
2. ä¿®å¤æ‰€æœ‰ç”¨æˆ·å¯è§çš„ä¸­æ–‡å†…å®¹
3. é‡æ–°æäº¤

**æ³¨æ„**: è°ƒè¯•è„šæœ¬ä¸­çš„ä¸­æ–‡å¯ä»¥ä¿ç•™ï¼Œä½†å»ºè®®ç¿»è¯‘ã€‚

### CI æ£€æŸ¥å¤±è´¥

å¦‚æœ CI æ£€æŸ¥å¤±è´¥ï¼š

1. æŸ¥çœ‹ GitHub Actions æ—¥å¿—
2. ä¿®å¤æ‰€æœ‰ç”¨æˆ·å¯è§çš„ä¸­æ–‡å†…å®¹
3. æ¨é€ä¿®å¤åçš„ä»£ç 

PR ä¸­ä¼šè‡ªåŠ¨æ·»åŠ è¯„è®ºï¼Œè¯´æ˜éœ€è¦ä¿®å¤çš„é—®é¢˜ã€‚

## ğŸ“Š æ£€æŸ¥ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | ä½ç½® | å¿…é¡»ä¿®å¤ | è¯´æ˜ |
|--------|------|---------|------|
| **ğŸ”´ æœ€é«˜** | ç”¨æˆ·ç•Œé¢æ–‡æœ¬ | âœ… å¿…é¡» | æŒ‰é’®ã€æ ‡ç­¾ã€å ä½ç¬¦ç­‰ |
| **ğŸ”´ æœ€é«˜** | é”™è¯¯æ¶ˆæ¯ | âœ… å¿…é¡» | API é”™è¯¯ã€éªŒè¯é”™è¯¯ç­‰ |
| **ğŸŸ¡ é«˜** | å†…å®¹ç”Ÿæˆæ¨¡æ¿ | âœ… å¿…é¡» | Prompt æ¨¡æ¿ã€SEO æ¨¡æ¿ç­‰ |
| **ğŸŸ¢ ä¸­** | ä»£ç æ³¨é‡Š | âš ï¸ å»ºè®® | ä¸å½±å“ç”¨æˆ·ï¼Œä½†å»ºè®®ç¿»è¯‘ |
| **ğŸŸ¢ ä½** | è°ƒè¯•è„šæœ¬ | âŒ å¯é€‰ | å¼€å‘å·¥å…·ï¼Œå¯ä»¥ä¿ç•™ |

## ğŸ” æ£€æŸ¥è§„åˆ™

### æ£€æŸ¥çš„å†…å®¹

- âœ… å­—ç¬¦ä¸²å­—é¢é‡ä¸­çš„ä¸­æ–‡
- âœ… å¸¸è§å­—æ®µä¸­çš„ä¸­æ–‡ï¼ˆlabel, title, placeholder, description, text, message, error, success, warning, info, children, contentï¼‰
- âœ… Alertã€Toast ç­‰ç”¨æˆ·å¯è§æ¶ˆæ¯ä¸­çš„ä¸­æ–‡

### ä¸æ£€æŸ¥çš„å†…å®¹

- âŒ ä»£ç æ³¨é‡Šä¸­çš„ä¸­æ–‡ï¼ˆé™¤éæ˜¯ç”¨æˆ·æç¤ºï¼‰
- âŒ Markdown æ–‡æ¡£ä¸­çš„ä¸­æ–‡
- âŒ è°ƒè¯•è„šæœ¬ä¸­çš„ä¸­æ–‡

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æäº¤å‰æ£€æŸ¥**: æ¯æ¬¡æäº¤å‰è¿è¡Œ `npm run check:chinese:changed`
2. **PR å‰æ£€æŸ¥**: åˆ›å»º PR å‰è¿è¡Œå®Œæ•´æ£€æŸ¥
3. **å®šæœŸæ£€æŸ¥**: æ¯å‘¨è¿è¡Œä¸€æ¬¡å®Œæ•´æ£€æŸ¥
4. **ä»£ç å®¡æŸ¥**: åœ¨ä»£ç å®¡æŸ¥æ—¶æ³¨æ„æ£€æŸ¥ä¸­æ–‡å†…å®¹

## ğŸ› ï¸ æ•…éšœæ’é™¤

### Pre-commit Hook ä¸å·¥ä½œ

```bash
# æ£€æŸ¥ hook æ˜¯å¦å­˜åœ¨
ls -la .git/hooks/pre-commit

# æ£€æŸ¥ hook æƒé™
chmod +x .git/hooks/pre-commit

# æˆ–é‡æ–°è®¾ç½®
./scripts/setup-git-hooks.sh
```

### CI æ£€æŸ¥å¤±è´¥ä½†æœ¬åœ°é€šè¿‡

å¯èƒ½çš„åŸå› ï¼š
1. æœ¬åœ°å’Œ CI çš„ git å†å²ä¸åŒ
2. æ£€æŸ¥è„šæœ¬ç‰ˆæœ¬ä¸åŒ

è§£å†³æ–¹æ¡ˆï¼š
```bash
# ä½¿ç”¨ç›¸åŒçš„ base åˆ†æ”¯æ£€æŸ¥
npm run check:chinese:changed -- --base=main --head=HEAD
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [GEO_AND_SEO_UNIFIED.md](../GEO_AND_SEO_UNIFIED.md) - ä¸Šçº¿å‰æ£€æŸ¥æ¸…å•
- [scripts/check-chinese-content.js](../scripts/check-chinese-content.js) - å®Œæ•´æ£€æŸ¥è„šæœ¬
- [scripts/check-chinese-content-changed.js](../scripts/check-chinese-content-changed.js) - å˜æ›´æ–‡ä»¶æ£€æŸ¥è„šæœ¬
